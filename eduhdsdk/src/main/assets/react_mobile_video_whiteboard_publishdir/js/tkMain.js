webpackJsonp([1],{"+BLA":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"/Mll":function(e,t,a){e.exports=a("OCs/")},"/a/u":function(e,t){t.f=Object.getOwnPropertySymbols},0:function(e,t,a){e.exports=a("6G9P")},"0jvK":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("hRKE"),i=n(o),r=a("AA3o"),l=n(r),s=a("xSur"),d=n(s),c=a("T+56"),u=n(c),h=function(){function e(){(0,l.default)(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return(0,d.default)(e,[{key:"productionDefaultAppAppPermissions",value:function(){return{canDraw:!1,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,h5DocumentActionClick:!1,dynamicPptActionClick:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromWBPageCount:!1,sendSignallingFromSharpsChange:!1,sendSignallingFromShowPage:!1,sendSignallingFromDynamicPptShowPage:!1,sendSignallingFromH5ShowPage:!1,sendSignallingFromGeneralShowPage:!1,sendSignallingFromDynamicPptTriggerActionClick:!1,sendSignallingFromH5DocumentAction:!1,sendSignallingFromVideoDraghandle:!1,sendSignallingFromBlackBoardDrag:!1,allUserTools:!1,laser:!1,publishDynamicPptMediaPermission_video:!1,sendWhiteboardMarkTool:!1,jumpPage:!1,sendSignallingFromBlackBoard:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,sendSignallingDataStudentToTeacherAnswer:!0,studentInit:!1,dialIconClose:!1,sendSignallingAnswerToStudent:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1,isShowVideoDrawTool:!1}}},{key:"resetDefaultAppPermissions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&u.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e&&"object"===(void 0===e?"undefined":(0,i.default)(e))&&(Object.customAssign(a.permissionsJson,e),t&&u.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var a=this;if(a.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",a.permissionsJson[e]),a.permissionsJson[e]=t;var n={type:"updateAppPermissions_"+e,message:{key:e,value:t}};u.default.CoreController.dispatchEvent(n)}}},{key:"getAppPermissions",value:function(e){return this.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var a in e)t.permissionsJson[a]=e[a];Object.customAssign(t.permissionsJson,e),t.permissionsJson=e,u.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),f=new h;t.default=f},"0lA4":function(e,t){},"1GTc":function(e,t,a){var n=a("MITN");n(n.S+n.F,"Object",{assign:a("nBsG")})},"2LoE":function(e,t,a){e.exports={default:a("cz9/"),__esModule:!0}},"2P8z":function(e,t,a){var n=a("OtAM"),o=a("DGQG"),i=a("K0/C").f;e.exports=function(e){return function(t){for(var a,r=o(t),l=n(r),s=l.length,d=0,c=[];s>d;)i.call(r,a=l[d++])&&c.push(e?[a,r[a]]:r[a]);return c}}},"2vo4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠標"},pencil:{title:"筆",pen:{text:"鉛筆工具"},Highlighter:{text:"熒光筆工具"},linellae:{text:"線條工具"},arrow:{text:"箭頭工具"},laser:{title:"激光筆",text:"激光筆工具"}},text:{title:"文字",Msyh:{text:"微軟雅黑"},Ming:{text:"宋體"},Arial:{text:"Arial"}},shape:{title:"形狀",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心橢圓"},filledCircle:{text:"橢圓"}},eraser:{title:"橡皮擦"},undo:{title:"撤銷"},redo:{title:"恢復"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"縮小"},tool_rotate_left:{title:"逆時針旋轉"},tool_rotate_right:{title:"順時針旋轉"},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"},colors:{title:"顏色"},measure:{title:"粗細"}},page:{prev:{text:"上壹頁"},next:{text:"下壹頁"},add:{text:"加頁"},lcFullBtn:{title:"繪制區域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5課件全屏"},skipPage:{text_one:"至第",text_two:"頁"},ok:{text:"確定"}}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"計時器"},timerBegin:{text:"開始"},timerStop:{text:"暫停"},again:{text:"重新開始"}},dial:{turntable:{text:"轉盤"}},answers:{headerTopLeft:{text:"答題器"},headerMiddel:{text:"點擊字母預設正確答案"},beginAnswer:{text:"開始答題"},tureAccuracy:{text:"正確率"},trueAnswer:{text:"正確答案"},endAnswer:{text:"結束答題"},restarting:{text:"重新開始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"請至少選擇壹個答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答題人數"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"詳情"},statistics:{text:"統計"},student:{text:"學生"},TheSelectedTheAnswer:{text:"所選答案"},AnswerTime:{text:"答題用時"},end:{text:"請先結束答題"}},responder:{responder:{text:"搶答器"},begin:{text:"開始搶答"},restart:{text:"重新開始"},close:{text:"關閉"},update:{text:"當前瀏覽器不支持canvas組件請升級！"},inAnswer:{text:"搶答中"},answer:{text:"搶答"},noContest:{text:"無人搶答"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}};t.default=n},"3cXf":function(e,t,a){e.exports={default:a("4rP4"),__esModule:!0}},"4YfN":function(e,t,a){"use strict";t.__esModule=!0;var n=a("aA9S"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}},"4rP4":function(e,t,a){var n=a("UusJ"),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},"4ztK":function(e,t,a){"use strict";var n=a("Ul0Y"),o=a("MITN"),i=a("/Mll"),r=a("OCs/"),l=a("7Tch"),s=a("9mma"),d=a("qd7y"),c=a("Macf"),u=a("hghX"),h=a("QjZ5")("iterator"),f=!([].keys&&"next"in[].keys()),g=function(){return this};e.exports=function(e,t,a,p,m,v,b){d(a,t,p);var y,S,w,T=function(e){if(!f&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new a(this,e)}}return function(){return new a(this,e)}},_=t+" Iterator",I="values"==m,k=!1,E=e.prototype,P=E[h]||E["@@iterator"]||m&&E[m],W=!f&&P||T(m),C=m?I?T("entries"):W:void 0,D="Array"==t?E.entries||P:P;if(D&&(w=u(D.call(new e)))!==Object.prototype&&w.next&&(c(w,_,!0),n||l(w,h)||r(w,h,g)),I&&P&&"values"!==P.name&&(k=!0,W=function(){return P.call(this)}),n&&!b||!f&&!k&&E[h]||r(E,h,W),s[t]=W,s[_]=g,m)if(y={values:I?W:T("values"),keys:v?W:T("keys"),entries:C},b)for(S in y)S in E||i(E,S,y[S]);else o(o.P+o.F*(f||k),t,y);return y}},"5sQS":function(e,t,a){var n=a("BLKo");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"6/+b":function(e,t,a){var n=a("KFas"),o=a("UusJ"),i=a("Ul0Y"),r=a("eQoU"),l=a("qRYU").f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:r.f(e)})}},"6EVm":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"6G9P":function(e,t,a){"use strict";a("0lA4"),a("PRvV"),a("w5fS"),a("9j6Y"),a("briU"),a("gDty"),a("buLY"),a("PqAP");var n=a("01iU");(0,function(e){return e&&e.__esModule?e:{default:e}}(n).default)()},"6ifl":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("4YfN"),i=n(o),r=a("A9zj"),l=n(r),s=a("Yarq"),d=n(s),c=a("AA3o"),u=n(c),h=a("xSur"),f=n(h),g=a("UzKs"),p=n(g),m=a("Y7Ml"),v=n(m),b=a("jyQm"),y=n(b),S=a("BNWl"),w=n(S),T=a("T+56"),_=n(T),I=a("DrPG"),k=n(I),E=a("HUPQ"),P=n(E),W=a("YRCL"),C=n(W),D=a("uObV"),A=n(D),L=function(e){function t(e){(0,u.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.containerWidthAndHeight=Object.customAssign({},a.props.containerWidthAndHeight),a.instanceId=void 0!==a.props.instanceId?a.props.instanceId:"whiteboard_default",a.whiteboardElementId="whiteboard_container_"+a.instanceId,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.showRemoteRemindContent=void 0!==a.props.showRemoteRemindContent?a.props.showRemoteRemindContent:P.default.showRemoteRemindContent,a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;_.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;e.props.saveImage&&A.default.downCanvasImageToLocalFile(e.instanceId),A.default.destroyWhiteboardInstance(e.instanceId),_.default.Window.removeBackupListerner(e.listernerBackupid),_.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.show!==this.props.show&&this.props.show&&A.default.resizeWhiteboardHandler(a.instanceId),!a.props.containerWidthAndHeight||a.props.containerWidthAndHeight.width===a.containerWidthAndHeight.width&&a.props.containerWidthAndHeight.height===a.containerWidthAndHeight.height||(Object.customAssign(a.containerWidthAndHeight,a.props.containerWidthAndHeight),A.default.updateContainerWidthAndHeight(a.instanceId,a.containerWidthAndHeight)),a.props.isBaseboard!==e.isBaseboard&&A.default.updateIsBaseboard(a.instanceId,a.props.isBaseboard),a.props.watermarkImageScalc!==e.watermarkImageScalc&&A.default.updateWhiteboardWatermarkImageScalc(a.instanceId,a.props.watermarkImageScalc),a.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&A.default.updateDependenceBaseboardWhiteboardID(a.instanceId,a.props.dependenceBaseboardWhiteboardID),a.props.deawPermission!==e.deawPermission&&A.default.changeWhiteboardDeawPermission(a.props.deawPermission,a.instanceId),a.props.useToolKey!==e.useToolKey&&A.default.activeWhiteboardTool(a.props.useToolKey,a.instanceId),a.props.useToolColor!==e.useToolColor&&A.default.updateColor(a.instanceId,{primary:a.props.useToolColor}),a.props.pencilWidth!==e.pencilWidth&&A.default.updatePencilWidth(a.instanceId,{pencilWidth:a.props.pencilWidth}),a.props.saveRedoStack!==e.saveRedoStack&&A.default.updateWhiteboardSaveRedoStackAndSaveUndoStack(a.instanceId,{saveRedoStack:a.props.saveRedoStack}),a.props.fontSize!==e.fontSize&&A.default.updateTextFont(a.instanceId,{fontSize:a.props.fontSize}),a.props.imageThumbnailId!==e.imageThumbnailId&&A.default.updateImageThumbnailId(a.instanceId,a.props.imageThumbnailId),a.props.backgroundColor!==e.backgroundColor&&A.default.updateColor(a.instanceId,{background:a.props.backgroundColor})}},{key:"handlerResizeHandler",value:function(e){var t=this;e&&e.message&&void 0!=e.message.eleWHPercent&&A.default.updateWhiteboardMagnification(t.instanceId,e.message.eleWHPercent)}},{key:"sendSignallingToServer",value:function(e,t,a,n,o,i,r,l){C.default.sendSignallingFromSharpsChange(!1,e,t,a,n,o,i,r,l)}},{key:"delSignallingToServer",value:function(e,t,a,n){C.default.sendSignallingFromSharpsChange(!0,e,t,a,n)}},{key:"resizeWhiteboardSizeCallback",value:function(e){this.props.resizeWhiteboardSizeCallback&&"function"==typeof this.props.resizeWhiteboardSizeCallback&&this.props.resizeWhiteboardSizeCallback(e)}},{key:"noticeUpdateToolDescCallback",value:function(e){}},{key:"_lcInit",value:function(){var e=this;if(!A.default.hasWhiteboardById(e.instanceId)){var t={whiteboardElementId:e.whiteboardElementId,id:e.instanceId,productionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,deawPermission:this.props.deawPermission,containerWidthAndHeight:this.props.containerWidthAndHeight,associatedMsgID:this.props.associatedMsgID,associatedUserID:this.props.associatedUserID,needLooadBaseboard:this.props.needLooadBaseboard,nickname:this.props.nickname,useToolKey:this.props.useToolKey,saveRedoStack:this.props.saveRedoStack,imageThumbnailId:this.props.imageThumbnailId,backgroundColor:this.props.backgroundColor,imageThumbnailTipContent:this.props.imageThumbnailTipContent,showRemoteRemindContent:this.showRemoteRemindContent},handler:{sendSignallingToServer:e.sendSignallingToServer.bind(e),delSignallingToServer:e.delSignallingToServer.bind(e),resizeWhiteboardSizeCallback:e.resizeWhiteboardSizeCallback.bind(e),noticeUpdateToolDescCallback:e.noticeUpdateToolDescCallback.bind(e)}};this.props.watermarkImageScalc&&(t.productionOptions.watermarkImageScalc=this.props.watermarkImageScalc);var a={tool_pencil:{},tool_eraser:{},tool_text:{}};A.default.productionWhiteboard(t),A.default.registerWhiteboardTools(e.instanceId,a),A.default.clearRedoAndUndoStack(e.instanceId),A.default.hasWhiteboardFiledata(e.instanceId)||A.default.updateWhiteboardFiledata(e.instanceId,A.default.getWhiteboardDefaultFiledata({fileid:this.instanceId,filetype:"blackboard",filename:"blackboard"})),A.default.loadCurrpageWhiteboard(e.instanceId),A.default.resizeWhiteboardHandler(e.instanceId),A.default.updateTextFont(e.instanceId,{fontSize:e.props.fontSize}),A.default.updateColor(e.instanceId,{primary:e.props.useToolColor}),A.default.updatePencilWidth(e.instanceId,{pencilWidth:e.props.pencilWidth})}}},{key:"render",value:function(){var e=this,t=e.props,a=t.show,n=(0,l.default)(t,["show"]);return y.default.createElement("div",(0,i.default)({id:e.whiteboardElementId,style:{display:a?"block":"none"},className:"overflow-hidden  scroll-literally-container "},k.default.filterContainDataAttribute(n)))}}]),t}(y.default.Component);L.propTypes={instanceId:w.default.string.isRequired,containerWidthAndHeight:w.default.object.isRequired,isBaseboard:w.default.bool.isRequired,deawPermission:w.default.bool.isRequired},t.default=L},"7Tch":function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},"809B":function(e,t,a){var n=a("nwJ7"),o=a("gE2q").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},"8zml":function(e,t,a){e.exports={default:a("S2tW"),__esModule:!0}},"9j6Y":function(e,t){},"9mma":function(e,t){e.exports={}},A9zj:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}},AA3o:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},Ay9U:function(e,t,a){a("kU6/"),e.exports=a("UusJ").Object.setPrototypeOf},BAOS:function(e,t,a){var n=a("uRtX"),o=a("Dc6E"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=a("W0SX")(Function.call,a("YzBJ").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,a){return i(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:i}},BLKo:function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},CLwS:function(e,t,a){var n=a("NUpW"),o=a("OtAM");a("Mx9c")("keys",function(){return function(e){return o(n(e))}})},CTvS:function(e,t,a){var n=a("KFas"),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},DGQG:function(e,t,a){var n=a("esCQ"),o=a("Joyc");e.exports=function(e){return n(o(e))}},Dc6E:function(e,t,a){var n=a("uRtX");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},DfvK:function(e,t,a){a("Sr0+"),e.exports=a("UusJ").Object.entries},DnLf:function(e,t,a){e.exports=!a("M7ni")&&!a("xVzf")(function(){return 7!=Object.defineProperty(a("ELtT")("div"),"a",{get:function(){return 7}}).a})},DrPG:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("Q+Ik"),i=n(o),r=a("HzJ8"),l=n(r),s=a("KH7x"),d=n(s),c=a("ZLEe"),u=n(c),h=a("hRKE"),f=n(h),g={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},isFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},runPrefixMethod:function(e,t){var a=void 0;return["webkit","moz","ms","o",""].forEach(function(n){if(!a){""===n&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var o=(0,f.default)(e[n+t]);o+""!="undefined"&&(a="function"===o?e[n+t]():e[n+t])}}),a},addFullscreenchange:function(e){g.tool.addEvent(document,"fullscreenchange",e,!1),g.tool.addEvent(document,"webkitfullscreenchange",e,!1),g.tool.addEvent(document,"mozfullscreenchange",e,!1),g.tool.addEvent(document,"MSFullscreenChange",e,!1),g.tool.addEvent(document,"msfullscreenchange",e,!1),g.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){g.tool.removeEvent(document,"fullscreenchange",e,!1),g.tool.removeEvent(document,"webkitfullscreenchange",e,!1),g.tool.removeEvent(document,"mozfullscreenchange",e,!1),g.tool.removeEvent(document,"MSFullscreenChange",e,!1),g.tool.removeEvent(document,"msfullscreenchange",e,!1),g.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){g.tool.addEvent(document,"fullscreenerror",e,!1),g.tool.addEvent(document,"webkitfullscreenerror",e,!1),g.tool.addEvent(document,"mozfullscreenerror",e,!1),g.tool.addEvent(document,"MSFullscreenError",e,!1),g.tool.addEvent(document,"msfullscreenerror",e,!1),g.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){g.tool.removeEvent(document,"fullscreenerror",e,!1),g.tool.removeEvent(document,"webkitfullscreenerror",e,!1),g.tool.removeEvent(document,"mozfullscreenerror",e,!1),g.tool.removeEvent(document,"MSFullscreenError",e,!1),g.tool.removeEvent(document,"msfullscreenerror",e,!1),g.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,n){n=void 0!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,n){e.addEventListener?e.removeEventListener(t,a,n):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),n=0;n<9;n++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return void 0!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)})}return new e},getNewGUID:function(){g.guidObj||(g.guidObj=new g.getGUID);var e=g.guidObj.newGUID();return g.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,a=/(firefox)\/([\w.]+)/,n=/(opera).+version\/([\w.]+)/,o=/(chrome)\/([\w.]+)/,i=/version\/([\w.]+).*(safari)/,r=function(e){var r=t.exec(e);return null!=r?{browser:"IE",version:r[2]||"0"}:null!=(r=a.exec(e))?{browser:r[1]||"",version:r[2]||"0"}:null!=(r=n.exec(e))?{browser:r[1]||"",version:r[2]||"0"}:null!=(r=o.exec(e))?{browser:r[1]||"",version:r[2]||"0"}:(r=i.exec(e),null!=r?{browser:r[2]||"",version:r[1]||"0"}:null!=r?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"})}(e.toLowerCase());return{versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:r.browser,browserVersion:r.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}}},isEmpty:function(e){return 0===(0,u.default)(e).length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=g.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var n=decodeURIComponent(a),o=n.indexOf("?"),i=n.substring(o+1),r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),l=i.match(r);return null!=l?l[2]:""},replaceFirstUper:function(e){if(e.length>0)return e.substring(0,1).toUpperCase()+e.substring(1)},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"===(void 0===e?"undefined":(0,f.default)(e))&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=g;if(e&&!t.isArray(e)&&"object"===(void 0===e?"undefined":(0,f.default)(e))){var a={},n=!0,o=!1,r=void 0;try{for(var s,c=(0,l.default)((0,i.default)(e));!(n=(s=c.next()).done);n=!0){var u=s.value,h=(0,d.default)(u,2),p=h[0],m=h[1];/^tkcustomdata/g.test(p)&&(a[p]=m)}}catch(e){o=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}return a}return e},getFiletyeByFilesuffix:function(e){return"jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){return{disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand}},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var n=Math.floor(a/864e5),o=a%864e5,i=Math.floor(o/36e5),r=o%36e5,l=Math.floor(r/6e4),s=r%6e4,d=Math.round(s/1e3),c=i+24*n,u={};return d>=60&&(d=0,l+=1),l>=60&&(l=0,c+=1),u.hh=c>9?c:"0"+c,u.mm=l>9?l:"0"+l,u.ss=d>9?d:"0"+d,u}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||g.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else if(g.getUrlParams("debug"))return e;return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";if("X11"===navigator.platform&&!t&&!a)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";if(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)return"Win2003";if(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7";if(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)return"Win8";if(e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1)return"Win10"}return"Other"},internetSpeedTest:function(){},percentageChangeToRem:function(e,t,a,n){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(n),r=i.clientWidth,l=i.clientHeight,s=window.GLOBAL.windowInnerWidth,d=window.GLOBAL.windowInnerHeight;return e.state[n].left=t*(s-r)/o,e.state[n].top=a*(d-l)/o,e.state[n]},RemChangeToPercentage:function(e,t,a,n){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(n),r=i.clientWidth,l=i.clientHeight;return{percentLeft:t/(window.GLOBAL.windowInnerWidth-r)*o,percentTop:a/(window.GLOBAL.windowInnerHeight-l)*o}},controlDragBounds:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,o=document.getElementById(t),i=o.clientWidth/n,r=o.clientHeight/n,l=document.getElementById(a),s=l.clientWidth/n,d=l.clientHeight/n;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>s-i?s-i:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-r?d-r:e.state[t].top,e.state[t]}};t.default=g},ELtT:function(e,t,a){var n=a("uRtX"),o=a("KFas").document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},FsTu:function(e,t,a){a("dmd9"),a("wCtA"),e.exports=a("Lo5Z")},GZtZ:function(e,t){var a=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+n).toString(36))}},GrKX:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("AA3o"),i=n(o),r=a("xSur"),l=n(r),s=a("T+56"),d=n(s),c=a("VSuD"),u=n(c),h=a("DrPG"),f=n(h),g=a("HUPQ"),p=n(g),m=a("yE5a"),v=n(m),b=a("uObV"),y=n(b),S=function(){function e(t){(0,i.default)(this,e),this.room=t}return(0,l.default)(e,[{key:"registerEventToRoom",value:function(){for(var e in u.default.EVENTTYPE.RoomEvent)!function(e){v.default.getTkRoom().addEventListener(u.default.EVENTTYPE.RoomEvent[e],function(t){var a=!0;"stream-rtcStats"===t.type&&(a=!1),a&&L.Logger.debug(u.default.EVENTTYPE.RoomEvent[e]+" event:",t),d.default.Room.dispatchEvent(t,!1)})}(e)}},{key:"addEventListenerToRoomHandler",value:function(){var e=this;for(var t in u.default.EVENTTYPE.RoomEvent)!function(t){d.default.Room.addEventListener(u.default.EVENTTYPE.RoomEvent[t],function(a){if(!e["handler"+f.default.replaceFirstUper(t)]||"function"!=typeof e["handler"+f.default.replaceFirstUper(t)]||!e["handler"+f.default.replaceFirstUper(t)](a)){var n=!0;"stream-rtcStats"===a.type&&(n=!1),d.default.CoreController.dispatchEvent(a,n)}})}(t)}},{key:"handlerRoomPubmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(p.default.serviceTime||(p.default.serviceTime=1e3*t.ts,p.default.remindServiceTime=1e3*t.ts),t.name){case"SharpsChange":p.default.showRemoteRemindContent&&v.default.getTkRoom().getUser(t.fromID)&&(t.remindContent=v.default.getTkRoom().getUser(t.fromID).nickname),y.default.handlerPubmsg_SharpsChange(t)}if("sendNetworkState"===t.name||"BlackBoardDrag"===t.name||"videoDraghandle"===t.name)return!0}},{key:"handlerRoomMsglist",value:function(e){var t=e.message,a=(e.source,{});return function(e,t,a){var n={};for(var o in e)a&&a[e[o].name]||(e[o].data&&"string"==typeof e[o].data&&(e[o].data=JSON.parse(e[o].data)),/outIframe/.test(e[o].name)?d.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[o]}}):null==n[e[o].name]||void 0==n[e[o].name]?(n[e[o].name]=[],n[e[o].name].push(e[o])):n[e[o].name].push(e[o]));var i=n.SharpsChange;null!=i&&void 0!=i&&i.length>0&&y.default.handlerMsglist_SharpsChange(i),n.SharpsChange=null;var r=n.VideoWhiteboard;null!==r&&void 0!==r&&r.length>0&&d.default.CoreController.dispatchEvent({type:"receive-msglist-VideoWhiteboard",message:{VideoWhiteboardArray:r}}),n.VideoWhiteboard=null}(t,0,a),!0}},{key:"handlerRoomDelmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"SharpsChange":y.default.handlerDelmsg_SharpsChange(t)}}},{key:"handlerRoomPlaybackClearAll",value:function(e){return d.default.CoreController.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController}),!0}},{key:"handlerRoomTransmitWindowSize",value:function(){document.getElementById("tk_app")?(p.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,p.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(p.default.windowInnerWidth=window.innerWidth,p.default.windowInnerHeight=window.innerHeight);var e=p.default.windowInnerWidth/u.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=f.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}return d.default.Window.dispatchEvent({type:u.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}}),!0}}]),e}(),w=new S;w.addEventListenerToRoomHandler(),t.default=w},HUPQ:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("3cXf"),i=n(o),r=a("DrPG"),l=n(r);window.GLOBAL=window.GLOBAL||{};var s=window.GLOBAL;s.classBegin=!1,s.endClassBegin=!1,s.routeName=void 0,s.playback=!1,s.playPptVideoing=!1,s.playMediaFileing=!1,s.serviceTime=void 0,s.firstGetServiceTime=!1,s.isHandleMsglist=!1,s.remindServiceTime=void 0,s.classBeginTime=void 0,s.isSkipPageing=!1,s.isClient=!1,s.isBroadcast=!1,s.mobileDeviceType=void 0,s.windowInnerWidth=window.innerWidth,s.windowInnerHeight=window.innerHeight;var d=l.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+(0,i.default)(d)),s.isMobile=d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad,s.isBroadcastClient=s.isClient&&s.isBroadcast,s.isBroadcastMobile=s.isMobile&&s.isBroadcast,s.languageName="ch"===l.default.getUrlParams("languageType")?"chinese":"tw"===l.default.getUrlParams("languageType")?"complex":"english",s.defaultFileInfo={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0},s.showRemoteRemindContent=!1,t.default=s},HzJ8:function(e,t,a){e.exports={default:a("aSM5"),__esModule:!0}},IYkF:function(e,t,a){e.exports={default:a("nrcm"),__esModule:!0}},Joyc:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"K0/C":function(e,t){t.f={}.propertyIsEnumerable},KFas:function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},KH7x:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a("MGgt"),i=n(o),r=a("HzJ8"),l=n(r);t.default=function(){function e(e,t){var a=[],n=!0,o=!1,i=void 0;try{for(var r,s=(0,l.default)(e);!(n=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},"KQ1+":function(e,t,a){a("6/+b")("asyncIterator")},KyAL:function(e,t,a){function n(e){return a(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./i18_chinese.js":"ppOE","./i18_complex.js":"2vo4","./i18_english.js":"yZ13"};n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id="KyAL"},Lo5Z:function(e,t,a){var n=a("iKyp"),o=a("QjZ5")("iterator"),i=a("9mma");e.exports=a("UusJ").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(n(t))}},M7ni:function(e,t,a){e.exports=!a("xVzf")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},MGgt:function(e,t,a){e.exports={default:a("FsTu"),__esModule:!0}},MITN:function(e,t,a){var n=a("KFas"),o=a("UusJ"),i=a("W0SX"),r=a("OCs/"),l=function(e,t,a){var s,d,c,u=e&l.F,h=e&l.G,f=e&l.S,g=e&l.P,p=e&l.B,m=e&l.W,v=h?o:o[t]||(o[t]={}),b=v.prototype,y=h?n:f?n[t]:(n[t]||{}).prototype;h&&(a=t);for(s in a)(d=!u&&y&&void 0!==y[s])&&s in v||(c=d?y[s]:a[s],v[s]=h&&"function"!=typeof y[s]?a[s]:p&&d?i(c,n):m&&y[s]==c?function(e){var t=function(t,a,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):g&&"function"==typeof c?i(Function.call,c):c,g&&((v.virtual||(v.virtual={}))[s]=c,e&l.R&&b&&!b[s]&&r(b,s,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},Macf:function(e,t,a){var n=a("qRYU").f,o=a("7Tch"),i=a("QjZ5")("toStringTag");e.exports=function(e,t,a){e&&!o(e=a?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},MgeX:function(e,t,a){e.exports={default:a("hdvR"),__esModule:!0}},Mx9c:function(e,t,a){var n=a("MITN"),o=a("UusJ"),i=a("xVzf");e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],r={};r[e]=t(a),n(n.S+n.F*i(function(){a(1)}),"Object",r)}},NUpW:function(e,t,a){var n=a("Joyc");e.exports=function(e){return Object(n(e))}},O9zq:function(e,t,a){"use strict";var n=a("KFas"),o=a("7Tch"),i=a("M7ni"),r=a("MITN"),l=a("/Mll"),s=a("X/59").KEY,d=a("xVzf"),c=a("CTvS"),u=a("Macf"),h=a("GZtZ"),f=a("QjZ5"),g=a("eQoU"),p=a("6/+b"),m=a("QmGQ"),v=a("5sQS"),b=a("Dc6E"),y=a("uRtX"),S=a("DGQG"),w=a("xXu8"),T=a("+BLA"),_=a("OTtE"),I=a("aCDz"),k=a("YzBJ"),E=a("qRYU"),P=a("OtAM"),W=k.f,C=E.f,D=I.f,A=n.Symbol,L=n.JSON,x=L&&L.stringify,M=f("_hidden"),B=f("toPrimitive"),R={}.propertyIsEnumerable,N=c("symbol-registry"),O=c("symbols"),F=c("op-symbols"),j=Object.prototype,U="function"==typeof A,z=n.QObject,H=!z||!z.prototype||!z.prototype.findChild,K=i&&d(function(){return 7!=_(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,a){var n=W(j,t);n&&delete j[t],C(e,t,a),n&&e!==j&&C(j,t,n)}:C,V=function(e){var t=O[e]=_(A.prototype);return t._k=e,t},G=U&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},Q=function(e,t,a){return e===j&&Q(F,t,a),b(e),t=w(t,!0),b(a),o(O,t)?(a.enumerable?(o(e,M)&&e[M][t]&&(e[M][t]=!1),a=_(a,{enumerable:T(0,!1)})):(o(e,M)||C(e,M,T(1,{})),e[M][t]=!0),K(e,t,a)):C(e,t,a)},Y=function(e,t){b(e);for(var a,n=m(t=S(t)),o=0,i=n.length;i>o;)Q(e,a=n[o++],t[a]);return e},J=function(e,t){return void 0===t?_(e):Y(_(e),t)},Z=function(e){var t=R.call(this,e=w(e,!0));return!(this===j&&o(O,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(O,e)||o(this,M)&&this[M][e])||t)},q=function(e,t){if(e=S(e),t=w(t,!0),e!==j||!o(O,t)||o(F,t)){var a=W(e,t);return!a||!o(O,t)||o(e,M)&&e[M][t]||(a.enumerable=!0),a}},X=function(e){for(var t,a=D(S(e)),n=[],i=0;a.length>i;)o(O,t=a[i++])||t==M||t==s||n.push(t);return n},$=function(e){for(var t,a=e===j,n=D(a?F:S(e)),i=[],r=0;n.length>r;)!o(O,t=n[r++])||a&&!o(j,t)||i.push(O[t]);return i};U||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(a){this===j&&t.call(F,a),o(this,M)&&o(this[M],e)&&(this[M][e]=!1),K(this,e,T(1,a))};return i&&H&&K(j,e,{configurable:!0,set:t}),V(e)},l(A.prototype,"toString",function(){return this._k}),k.f=q,E.f=Q,a("809B").f=I.f=X,a("K0/C").f=Z,a("/a/u").f=$,i&&!a("Ul0Y")&&l(j,"propertyIsEnumerable",Z,!0),g.f=function(e){return V(f(e))}),r(r.G+r.W+r.F*!U,{Symbol:A});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)f(ee[te++]);for(var ae=P(f.store),ne=0;ae.length>ne;)p(ae[ne++]);r(r.S+r.F*!U,"Symbol",{for:function(e){return o(N,e+="")?N[e]:N[e]=A(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),r(r.S+r.F*!U,"Object",{create:J,defineProperty:Q,defineProperties:Y,getOwnPropertyDescriptor:q,getOwnPropertyNames:X,getOwnPropertySymbols:$}),L&&r(r.S+r.F*(!U||d(function(){var e=A();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))})),"JSON",{stringify:function(e){for(var t,a,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(a=t=n[1],(y(t)||void 0!==e)&&!G(e))return v(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!G(t))return t}),n[1]=t,x.apply(L,n)}}),A.prototype[B]||a("OCs/")(A.prototype,B,A.prototype.valueOf),u(A,"Symbol"),u(Math,"Math",!0),u(n.JSON,"JSON",!0)},"OCs/":function(e,t,a){var n=a("qRYU"),o=a("+BLA");e.exports=a("M7ni")?function(e,t,a){return n.f(e,t,o(1,a))}:function(e,t,a){return e[t]=a,e}},OTtE:function(e,t,a){var n=a("Dc6E"),o=a("Qlg0"),i=a("gE2q"),r=a("nUWZ")("IE_PROTO"),l=function(){},s=function(){var e,t=a("ELtT")("iframe"),n=i.length;for(t.style.display="none",a("lIme").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;n--;)delete s.prototype[i[n]];return s()};e.exports=Object.create||function(e,t){var a;return null!==e?(l.prototype=n(e),a=new l,l.prototype=null,a[r]=e):a=s(),void 0===t?a:o(a,t)}},OtAM:function(e,t,a){var n=a("nwJ7"),o=a("gE2q");e.exports=Object.keys||function(e){return n(e,o)}},Ovlj:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("3cXf"),i=n(o),r=a("hRKE"),l=n(r),s=a("AA3o"),d=n(s),c=a("xSur"),u=n(c),h=a("HUPQ"),f=n(h),g=a("yE5a"),p=n(g),m=a("Sa83"),v=n(m),b=a("VSuD"),y=n(b),S=function(){function e(){(0,d.default)(this,e)}return(0,u.default)(e,[{key:"pubMsg",value:function(e,t,a,n,o,r,s,d){if(v.default.handler.getAppPermissions("pubMsg")&&f.default.appConnected){a=a||"__all";var c=!o;n&&"object"===(void 0===n?"undefined":(0,l.default)(n))&&(n=(0,i.default)(n)),p.default.getTkRoom().pubMsg(e,t,a,n,c,r,s,d)}}},{key:"delMsg",value:function(e,t,a,n){v.default.handler.getAppPermissions("delMsg")&&f.default.appConnected&&(a=a||"__all",n&&"object"===(void 0===n?"undefined":(0,l.default)(n))&&(n=(0,i.default)(n)),p.default.getTkRoom().delMsg(e,t,a,n))}},{key:"setProperty",value:function(e,t,a){v.default.handler.getAppPermissions("setProperty")&&f.default.appConnected&&(t=t||"__all",p.default.getTkRoom().changeUserProperty(e,t,a))}},{key:"setParticipantPropertyToAll",value:function(e,t){if(v.default.handler.getAppPermissions("setParticipantPropertyToAll")){var a=this,n=p.default.getTkRoom().getUsers()[e];if(!n)return void L.Logger.error("user is not exist  , user id is "+e+"!");(n.role===y.default.role.roleChairman||n.role===y.default.role.roleStudent||n.role===y.default.role.roleTeachingAssistant&&y.default.joinRoomInfo.assistantOpenMyseftAV||!t||void 0==t.publishstate)&&a.setProperty(e,"__all",t)}}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,n,o,i,r,l,s){if(v.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,a,n,o):(l||"VideoWhiteboard"===t||"ClassBegin"===t||"SharpsChange"===t||"WBPageCount"===t||"ShowPage"===t||"whiteboardMarkTool"===t||(l="ClassBegin"),d.pubMsg(t,a,n,o,i,r,l,s))}}},{key:"sendTextMessage",value:function(e,t){v.default.handler.getAppPermissions("sendTextMessage")&&f.default.appConnected&&e&&(t=t||"__all",e&&"object"===(void 0===e?"undefined":(0,l.default)(e))&&(e=(0,i.default)(e)),p.default.getTkRoom().sendMessage(e,t))}}]),e}();t.default=S},PRvV:function(e,t){},PqAP:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=a("jyQm"),i=n(o),r=a("i+ms"),l=n(r),s=a("Sa83"),d=n(s),c=a("rkp3"),u=n(c);d.default.handler.loadSystemRequiredInfo(),l.default.render(i.default.createElement(u.default,null),document.getElementById("tk_app"))},"Q+Ik":function(e,t,a){e.exports={default:a("DfvK"),__esModule:!0}},QjZ5:function(e,t,a){var n=a("CTvS")("wks"),o=a("GZtZ"),i=a("KFas").Symbol,r="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=r&&i[e]||(r?i:o)("Symbol."+e))}).store=n},Qlg0:function(e,t,a){var n=a("qRYU"),o=a("Dc6E"),i=a("OtAM");e.exports=a("M7ni")?Object.defineProperties:function(e,t){o(e);for(var a,r=i(t),l=r.length,s=0;l>s;)n.f(e,a=r[s++],t[a]);return e}},QmGQ:function(e,t,a){var n=a("OtAM"),o=a("/a/u"),i=a("K0/C");e.exports=function(e){var t=n(e),a=o.f;if(a)for(var r,l=a(e),s=i.f,d=0;l.length>d;)s.call(e,r=l[d++])&&t.push(r);return t}},"RNB/":function(e,t,a){var n=a("tXsA"),o=a("Joyc");e.exports=function(e){return function(t,a){var i,r,l=String(o(t)),s=n(a),d=l.length;return s<0||s>=d?e?"":void 0:(i=l.charCodeAt(s),i<55296||i>56319||s+1===d||(r=l.charCodeAt(s+1))<56320||r>57343?e?l.charAt(s):i:e?l.slice(s,s+2):r-56320+(i-55296<<10)+65536)}}},S2tW:function(e,t,a){a("eWTT");var n=a("UusJ").Object;e.exports=function(e,t){return n.defineProperties(e,t)}},Sa83:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("hRKE"),i=n(o),r=a("T+56"),l=n(r),s=a("GrKX"),d=n(s),c=a("VSuD"),u=n(c),h=a("HUPQ"),f=n(h),g=a("DrPG"),p=n(g),m=a("0jvK"),v=n(m),b=a("ZZXC"),y=n(b),S=a("yE5a"),w=n(S),T=a("Wi6Q"),_=n(T),I=TK.EventDispatcher({});l.default.CoreController=I,I.handler={},I.handler.loadSystemRequiredInfo=function(){if(document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},TK.tkLogPrintConfig)if(u.default.DEV){var e={debug:!0},t={development:!0,logLevel:u.default.LOGLEVEL.DEBUG},a={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,a)}else{var n={debug:!1},o={development:!1,logLevel:u.default.LOGLEVEL.INFO},i={webrtcLogDebug:!1};TK.tkLogPrintConfig(n,o,i)}y.default.getAppLanguageInfo(function(e){f.default.language=e}),w.default.setTkRoom(TK.Room()),w.default.getTkRoom().changeExtendSendInterfaceName("_videoWhiteboardPage"),d.default.registerEventToRoom()},I.handler.setAppPermissions=function(e,t){v.default.setAppPermissions(e,t)},I.handler.getAppPermissions=function(e){return v.default.getAppPermissions(e)},I.handler.initAppPermissions=function(e){v.default.initAppPermissions(e)},I.handler.addEventListenerOnCoreController=function(){var e=function(){document.getElementById("tk_app")?(f.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,f.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(f.default.windowInnerWidth=window.innerWidth,f.default.windowInnerHeight=window.innerHeight);var e=f.default.windowInnerWidth/u.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=p.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}l.default.Window.dispatchEvent({type:u.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}})};p.default.tool.removeEvent(window,"resize",e),p.default.tool.addEvent(window,"resize",e,!1),e();var t=function(e){l.default.Window.dispatchEvent({type:u.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};p.default.tool.removeEvent(window,"message",t),p.default.tool.addEvent(window,"message",t,!1);var a=function(e){l.default.Document.dispatchEvent({type:u.default.EVENTTYPE.DocumentEvent.onFullscreenchange,message:{event:e}})};p.default.tool.removeFullscreenchange(a),p.default.tool.addFullscreenchange(a),"mobile"===TK.SDKTYPE&&I.handler.addEventfRromMobileUICoreEventManager()},I.handler.addEventfRromMobileUICoreEventManager=function(){"mobile"===TK.SDKTYPE&&(TK.mobileUICoreEventManager.addEventListener("mobileSdk_setInitPageParameterFormPhone",function(e){var t=e.message;if(void 0!==t.deviceType&&(f.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",l.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.myself&&"object"===(0,i.default)(t.myself)){f.default.appConnected=!0,f.default.classBegin=!0,Object.customAssign(w.default.getTkRoom().getMySelf(),t.myself);var a={nickname:w.default.getTkRoom().getMySelf().nickname,thirdid:w.default.getTkRoom().getMySelf().id,roomrole:Number(w.default.getTkRoom().getMySelf().role)};u.default.bindRoomInfoToTkConstant(a),u.default.bindParticipantHasRoleToTkConstant();var n=_.default.getRoleHasDefalutAppPermissions();v.default.initAppPermissions(n)}f.default.playback=TK.global.initPageParameterFormPhone.playback,void 0!==t.serviceUrl&&u.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!0)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_changeInitPageParameterFormPhone",function(e){var t=e.message;void 0!==t.deviceType&&(f.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",l.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.serviceUrl&&u.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!1)}))},I.handler.addEventListenerOnCoreController(),t.default=I},"Sr0+":function(e,t,a){var n=a("MITN"),o=a("2P8z")(!0);n(n.S,"Object",{entries:function(e){return o(e)}})},"T+56":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.Document=TK.EventDispatcher({}),n.Window=TK.EventDispatcher({}),n.Element=TK.EventDispatcher({}),n.Room=TK.EventDispatcher({}),n.Stream=TK.EventDispatcher({}),n.Role=TK.EventDispatcher({}),t.default=n},USsz:function(e,t,a){"use strict";var n=a("W273"),o=a("qWNy"),i=a("9mma"),r=a("DGQG");e.exports=a("4ztK")(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,a):"values"==t?o(0,e[a]):o(0,[a,e[a]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},UWEk:function(e,t){},Ul0Y:function(e,t){e.exports=!0},UusJ:function(e,t){var a=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=a)},UzKs:function(e,t,a){"use strict";t.__esModule=!0;var n=a("hRKE"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},VSuD:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("8zml"),i=n(o),r=a("DrPG"),l=n(r),s=a("T+56"),d=n(s),c=a("HUPQ"),u=(n(c),{}),h="v2.1.0",f="2017120622",g=!1;try{h="2.1.6",f=2018011516,g=!1}catch(a){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}u.VERSIONS=h,u.VERSIONSTIME=f,u.newpptVersions=2017091401,u.remoteNewpptUpdateTime=201712062201,u.debugFromAddress=!!l.default.getUrlParams("debug")&&""!=l.default.getUrlParams("debug"),u.DEV=g||u.debugFromAddress,u.role={},(0,i.default)(u.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var p={};(0,i.default)(p,{roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomPlaybackClearAllFromPlaybackController:{value:"room-playback-clear_all-from-playback-controller",writable:!1,enumerable:!0},roomMsglist:{value:"room-msglist",writable:!1,enumerable:!0},roomTransmitWindowSize:{value:"transmitWindowSize",writable:!1,enumerable:!0}});var m={};(0,i.default)(m,{onResize:{value:"onResize",writable:!1}}),(0,i.default)(m,{onMessage:{value:"onMessage",writable:!1}});var v={};(0,i.default)(v,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),u.EVENTTYPE={},(0,i.default)(u.EVENTTYPE,{RoomEvent:{value:p,writable:!1},WindowEvent:{value:m,writable:!1},DocumentEvent:{value:v,writable:!1}}),u.ROOMTYPE={},(0,i.default)(u.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),u.PUBLISHSTATE={},(0,i.default)(u.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),u.STANDARDSIZE=15.8,u.companyidToCompanyName={10035:{value:"icoachu",writable:!1,enumerable:!0},10036:{value:"stupidBird",writable:!1,enumerable:!0},10059:{value:"17zuoye",writable:!1,enumerable:!0}},u.LOGLEVEL={},(0,i.default)(u.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),u.SERVICEINFO={},u.bindServiceinfoToTkConstant=function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=TK.global.initPageParameterFormPhone.serviceUrl.address.split("://");e=e||o[0],t=t||o[1],a=a||TK.global.initPageParameterFormPhone.serviceUrl.port;var i={protocol:e,hostname:t,port:a,sdkPort:443,protocolAndHostname:e+"://"+t,address:e+"://"+t+":"+a};n&&(i.joinUrl=l.default.encrypt(window.location.href)),Object.customAssign(u.SERVICEINFO,i),n&&console.info("encrypt_tk_info:\n",u.SERVICEINFO.joinUrl),d.default&&d.default.CoreController&&d.default.CoreController.dispatchEvent&&d.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:u.SERVICEINFO}})},u.joinRoomInfo={},u.bindRoomInfoToTkConstant=function(e){if(!e)return void L.Logger.error("joinRoomInfo is not exist!");L.Logger.debug("joinRoomInfo:",e),u.joinRoomInfo=e,d.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:u.joinRoomInfo}})},u.hasRole={},u.bindParticipantHasRoleToTkConstant=function(){if(!u.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,i.default)(u.hasRole,{roleChairman:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleChairman,writable:!1},roleTeachingAssistant:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleTeachingAssistant,writable:!1},roleStudent:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleStudent,writable:!1},roleAudit:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleAudit,writable:!1},rolePatrol:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.rolePatrol,writable:!1},rolePlayback:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.rolePlayback,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:u.hasRole}})},u.hasRoomtype={},u.bindParticipantHasRoomtypeToTkConstant=function(){if(!u.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,i.default)(u.hasRoomtype,{oneToOne:{value:u.joinRoomInfo&&u.joinRoomInfo.roomtype===u.ROOMTYPE.oneToOne,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:u.hasRoomtype}})},window.TkConstant=u,t.default=u},W0SX:function(e,t,a){var n=a("6EVm");e.exports=function(e,t,a){if(n(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,o){return e.call(t,a,n,o)}}return function(){return e.apply(t,arguments)}}},W273:function(e,t){e.exports=function(){}},Wi6Q:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("ZLEe"),i=n(o),r=a("HzJ8"),l=n(r),s=a("AA3o"),d=n(s),c=a("xSur"),u=n(c),h=a("VSuD"),f=n(h),g=a("yE5a"),p=(n(g),a("0jvK")),m=n(p),v=a("T+56"),b=(n(v),a("HUPQ")),y=n(b),S=a("Sa83"),w=(n(S),function(){function e(t){(0,d.default)(this,e),this.role=t}return(0,u.default)(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||m.default.productionDefaultAppAppPermissions();if(f.default.joinRoomInfo&&void 0!=f.default.joinRoomInfo.roomrole)switch(f.default.joinRoomInfo.roomrole){case f.default.role.roleChairman:if(y.default.classBegin){var a=!0,n=!1,o=void 0;try{for(var r,s=(0,l.default)((0,i.default)(t));!(a=(r=s.next()).done);a=!0)t[r.value]=!0}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}Object.customAssign(t,{raisehand:!1,dialCircleClick:!1})}else Object.customAssign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0,endClassbeginRevertToStartupLayout:!0});break;case f.default.role.roleTeachingAssistant:if(y.default.classBegin){var d=!0,c=!1,u=void 0;try{for(var h,g=(0,l.default)((0,i.default)(t));!(d=(h=g.next()).done);d=!0)t[h.value]=!0}catch(e){c=!0,u=e}finally{try{!d&&g.return&&g.return()}finally{if(c)throw u}}Object.customAssign(t,{laser:!1,endClassbeginRevertToStartupLayout:!1})}else Object.customAssign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0});break;case f.default.role.rolePatrol:y.default.classBegin,Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1});break;case f.default.role.roleStudent:y.default.classBegin?Object.customAssign(t,{whiteboardPagingPage:f.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:f.default.joinRoomInfo.isSupportPageTrun,jumpPage:f.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromSharpsChange:!0}):Object.customAssign(t,{whiteboardPagingPage:f.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:f.default.joinRoomInfo.isSupportPageTrun,jumpPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentActionClick:f.default.joinRoomInfo.isSupportPageTrun,dynamicPptActionClick:f.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0});break;case f.default.role.rolePlayback:y.default.classBegin,Object.customAssign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1});break;case f.default.role.roleAudit:var p=!0,v=!1,b=void 0;try{for(var S,w=(0,l.default)((0,i.default)(t));!(p=(S=w.next()).done);p=!0)t[S.value]=!1}catch(e){v=!0,b=e}finally{try{!p&&w.return&&w.return()}finally{if(v)throw b}}Object.customAssign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),T=new w;T.addEventListenerToRoomHandler(),t.default=T},"X/59":function(e,t,a){var n=a("GZtZ")("meta"),o=a("uRtX"),i=a("7Tch"),r=a("qRYU").f,l=0,s=Object.isExtensible||function(){return!0},d=!a("xVzf")(function(){return s(Object.preventExtensions({}))}),c=function(e){r(e,n,{value:{i:"O"+ ++l,w:{}}})},u=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[n].i},h=function(e,t){if(!i(e,n)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[n].w},f=function(e){return d&&g.NEED&&s(e)&&!i(e,n)&&c(e),e},g=e.exports={KEY:n,NEED:!1,fastKey:u,getWeak:h,onFreeze:f}},X6b2:function(e,t,a){var n=a("iKyp"),o=a("QjZ5")("iterator"),i=a("9mma");e.exports=a("UusJ").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},Y7Ml:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a("qCHB"),i=n(o),r=a("IYkF"),l=n(r),s=a("hRKE"),d=n(s);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,d.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},YRCL:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("Yarq"),i=n(o),r=a("AA3o"),l=n(r),s=a("xSur"),d=n(s),c=a("UzKs"),u=n(c),h=a("Y7Ml"),f=n(h),g=a("Ovlj"),p=n(g),m=a("yE5a"),v=n(m),b=a("DrPG"),y=(n(b),a("VSuD")),S=(n(y),a("Sa83")),w=n(S),T=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(w.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,a=e||"__all",n={};t.sendSignallingDataToParticipant(!1,"UpdateTime","UpdateTime",a,n,!0)}}},{key:"sendSignallingFromSharpsChange",value:function(e,t,a,n,o,i,r,l,s){if(w.default.handler.getAppPermissions("sendSignallingFromSharpsChange")){var d=this;e&&(i=!0),d.sendSignallingDataToParticipant(e,t,a,n,o,i,r,l,s)}}},{key:"sendSignallingFromWBPageCount",value:function(e){w.default.handler.getAppPermissions("sendSignallingFromWBPageCount")&&this.sendSignallingDataToParticipant(!1,"WBPageCount","WBPageCount","__allExceptSender",e,void 0)}},{key:"sendSignallingFromShowPage",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"__all";if(w.default.handler.getAppPermissions("sendSignallingFromShowPage")){if(!a)return void L.Logger.error("sendSignallingFromShowPage data is not exist!");a&&"string"==typeof a&&(a=JSON.parse(a)),a.isDynamicPPT&&!w.default.handler.getAppPermissions("sendSignallingFromDynamicPptShowPage")||a.isH5Document&&!w.default.handler.getAppPermissions("sendSignallingFromH5ShowPage")||a.isGeneralFile&&!w.default.handler.getAppPermissions("sendSignallingFromGeneralShowPage")||this.sendSignallingDataToParticipant(e,"ShowPage",t,n,a)}}},{key:"sendSignallingFromDynamicPptTriggerActionClick",value:function(e){w.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerActionClick")&&this.sendSignallingDataToParticipant(!1,"NewPptTriggerActionClick","NewPptTriggerActionClick","__allExceptSender",e,!1)}},{key:"sendSignallingFromH5DocumentAction",value:function(e){w.default.handler.getAppPermissions("sendSignallingFromH5DocumentAction")&&this.sendSignallingDataToParticipant(!1,"H5DocumentAction","H5DocumentAction","__allExceptSender",e,!1)}},{key:"sendSignallingFromVideoDraghandle",value:function(e,t){if(w.default.handler.getAppPermissions("sendSignallingFromVideoDraghandle")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"videoDraghandle","videoDraghandle",t,e,!1)}}},{key:"sendMarkToolMouseIsSelect",value:function(e,t,a){if(w.default.handler.getAppPermissions("sendWhiteboardMarkTool")){var n=this,o={selectMouse:e};t&&(o.selectElementLiId=t),a&&(o.selectElementId=a),n.sendSignallingDataToParticipant(!1,"whiteboardMarkTool","whiteboardMarkTool","__allExceptSender",o)}}},{key:"sendSignallingFromBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w.default.handler.getAppPermissions("sendSignallingFromBlackBoard")&&this.sendSignallingDataToParticipant(t,"BlackBoard","BlackBoard","__all",e)}},{key:"sendSignallingTimerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!w.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"timer","timerMesg","__all",e)}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(w.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"BlackBoardDrag","BlackBoardDrag",t,e,!1,void 0,"BlackBoard")}}},{key:"sendSignallingDialToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w.default.handler.getAppPermissions("sendSignallingDialToStudent")&&this.sendSignallingDataToParticipant(t,"dial","dialMesg","__all",e)}},{key:"sendSignallingAnswerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!w.default.handler.getAppPermissions("sendSignallingAnswerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"answer","answerMesg","__all",e)}},{key:"sendSignallingDataStudentToTeacherAnswer",value:function(e,t){if(!w.default.handler.getAppPermissions("sendSignallingDataStudentToTeacherAnswer"))return!1;var a=this,n="submitAnswers_"+v.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"submitAnswers",n,"__all",t,void 0,void 0,"answerMesg")}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!w.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;this.sendSignallingDataToParticipant(e,"qiangDaQi","qiangDaQiMesg","__all",t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!w.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a=this,n="QiangDaZhe_"+v.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"QiangDaZhe",n,"__all",t,void 0,void 0,"qiangDaQiMesg")}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(w.default.handler.getAppPermissions("sendSignallingFromDialDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"DialDrag","DialDrag",t,e,!1,void 0,"dialMesg")}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(w.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"ResponderDrag","ResponderDrag",t,e,!1,void 0,"qiangDaQiMesg")}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(w.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"TimerDrag","TimerDrag",t,e,!1,void 0,"timerMesg")}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(w.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"AnswerDrag","AnswerDrag",t,e,!1,void 0,"answerMesg")}}}]),t}(p.default),_=new T;t.default=_},Yarq:function(e,t,a){e.exports={default:a("yjjd"),__esModule:!0}},YwFF:function(e,t,a){a("1GTc"),e.exports=a("UusJ").Object.assign},Yyxk:function(e,t,a){e.exports={default:a("bcUa"),__esModule:!0}},YzBJ:function(e,t,a){var n=a("K0/C"),o=a("+BLA"),i=a("DGQG"),r=a("xXu8"),l=a("7Tch"),s=a("DnLf"),d=Object.getOwnPropertyDescriptor;t.f=a("M7ni")?d:function(e,t){if(e=i(e),t=r(t,!0),s)try{return d(e,t)}catch(e){}if(l(e,t))return o(!n.f.call(e,t),e[t])}},ZLEe:function(e,t,a){e.exports={default:a("rhsp"),__esModule:!0}},ZZXC:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("DrPG"),i=n(o),r=a("HUPQ"),l=n(r),s=a("VSuD"),d=(n(s),a("yE5a")),c=(n(d),a("T+56")),u=(n(c),a("YRCL")),h=(n(u),{getAppLanguageInfo:function(e,t){var n=t||l.default.languageName,o={};l.default.language=l.default.language||{},o.name=n,o.languageData=a("KyAL")("./i18_"+n+".js").default,e&&"function"==typeof e&&e(o),document.body.className=document.body.className.replace(/(chinese|english|complex)/g,"")+" "+o.name,document.body.setAttribute("data-language",o.name)},TkUtils:i.default});t.default=h},aA9S:function(e,t,a){e.exports={default:a("YwFF"),__esModule:!0}},aCDz:function(e,t,a){var n=a("DGQG"),o=a("809B").f,i={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(e){return r.slice()}};e.exports.f=function(e){return r&&"[object Window]"==i.call(e)?l(e):o(n(e))}},aSM5:function(e,t,a){a("dmd9"),a("wCtA"),e.exports=a("rLQK")},adMp:function(e,t,a){a("pBXl");var n=a("UusJ").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},bJSL:function(e,t,a){var n=a("NUpW"),o=a("hghX");a("Mx9c")("getPrototypeOf",function(){return function(e){return o(n(e))}})},bcUa:function(e,t,a){a("O9zq"),a("UWEk"),a("KQ1+"),a("vuzV"),e.exports=a("UusJ").Symbol},buLY:function(e,t,a){"use strict";var n={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=n},"cz9/":function(e,t,a){a("wCtA"),a("dmd9"),e.exports=a("eQoU").f("iterator")},dmd9:function(e,t,a){a("USsz");for(var n=a("KFas"),o=a("OCs/"),i=a("9mma"),r=a("QjZ5")("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<l.length;s++){var d=l[s],c=n[d],u=c&&c.prototype;u&&!u[r]&&o(u,r,d),i[d]=i.Array}},eOcM:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("hRKE"),i=n(o),r=a("4YfN"),l=n(r),s=a("Yarq"),d=n(s),c=a("AA3o"),u=n(c),h=a("xSur"),f=n(h),g=a("UzKs"),p=n(g),m=a("Y7Ml"),v=n(m),b=a("jyQm"),y=n(b),S=a("i+ms"),w=(n(S),a("HUPQ")),T=n(w),_=a("VSuD"),I=n(_),k=a("6ifl"),E=n(k),P=a("T+56"),W=n(P),C=a("Sa83"),D=n(C),A=function(e){function t(e,a){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e,a));return n.state={videoDrawBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageScalc:16/9,isShow:!1,backgroundColor:"transparent",instanceId:"videoDrawBoard",saveImage:!1,nickname:"videoDrawBoard",deawPermission:!1,associatedMsgID:"VideoWhiteboard"},useToolInfo:{useToolKey:"tool_pencil",useToolColor:"#FF0000",blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small"},BlackboardSmartIsShow:!1},n.listernerBackupid=(new Date).getTime()+"_"+Math.random(),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;W.default.CoreController.addEventListener(I.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),W.default.CoreController.addEventListener(I.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),W.default.CoreController.addEventListener(I.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),W.default.CoreController.addEventListener(I.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),W.default.CoreController.addEventListener("receive-msglist-VideoWhiteboard",e.receiveMsglistVideoWhiteboard.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;W.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.videoDrawBoardInfo.isShow!==this.state.videoDrawBoardInfo.isShow&&this.setState({BlackboardSmartIsShow:this.state.videoDrawBoardInfo.isShow})}},{key:"handlerRoomPlaybackClearAll",value:function(){var e=(0,l.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomDisconnected",value:function(){var e=(0,l.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":var a=(0,l.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=D.default.handler.getAppPermissions("isShowVideoDrawTool"),t.data&&"object"===(0,i.default)(t.data)&&t.data.videoRatio&&(a.watermarkImageScalc=t.data.videoRatio),this.setState({videoDrawBoardInfo:a})}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"VideoWhiteboard":var t=(0,l.default)({},this.state.videoDrawBoardInfo);t.isShow=!1,t.deawPermission=!1,this.setState({videoDrawBoardInfo:t})}}},{key:"receiveMsglistVideoWhiteboard",value:function(e){var t=e.message.VideoWhiteboardArray[0].data,a=(0,l.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=D.default.handler.getAppPermissions("isShowVideoDrawTool"),t&&"object"===(void 0===t?"undefined":(0,i.default)(t))&&t.videoRatio&&(a.watermarkImageScalc=t.videoRatio),this.setState({videoDrawBoardInfo:a})}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"changeStrokeColorClick",value:function(e){this.state.useToolInfo.useToolColor=e,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=[];return a="mobile"!==TK.SDKTYPE?["#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF","#FE9401","#FF2C55","#007AFF","#7457F1","#626262","#000000"]:["#FF0000","#FFFF00","#007AFF","#000000"],a.forEach(function(a,n){var o="mobile"!==TK.SDKTYPE?y.default.createElement("li",{className:"color-option "+(e.state.useToolInfo.useToolColor===a?" active":""),key:n,onClick:e.changeStrokeColorClick.bind(e,a),style:{backgroundColor:a},id:"video_drawBoard_color_"+e._colorFilter(a)}):y.default.createElement("li",{key:n,className:"blackboard-tool-option"},y.default.createElement("button",{id:"video_drawBoard_color_"+e._colorFilter(a),className:"color-option "+(e.state.useToolInfo.useToolColor===a?" active":""),style:{backgroundColor:a},onTouchStart:e.changeStrokeColorClick.bind(e,a)}));t.push(o)}),{toolColorsArray:t}}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||(this.state.useToolInfo.useToolKey=e,this.setState({useToolInfo:this.state.useToolInfo}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.state.useToolInfo.selectBlackboardToolSizeId=e,this.state.useToolInfo.blackboardToolsInfo=t,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"render",value:function(){var e=this,t=e.state,a=t.videoDrawBoardInfo,n=t.useToolInfo,o=this.props.containerWidthAndHeight,i=n.useToolKey,r=e._loadToolColorsElementArray(),l=r.toolColorsArray,s="tool_eraser"===i?n.blackboardToolsInfo.eraser:n.blackboardToolsInfo.pencil;return y.default.createElement("div",{className:"video-drawing-board-box",style:{display:a.isShow?"block":"none"}},y.default.createElement("div",{className:"video-drawing-board",style:{display:a.isShow?"flex":"none"}},this.state.BlackboardSmartIsShow?y.default.createElement(E.default,{isBaseboard:!1,containerWidthAndHeight:o,instanceId:a.instanceId,nickname:a.nickname,show:this.state.BlackboardSmartIsShow,backgroundColor:a.backgroundColor,useToolKey:i,showRemoteRemindContent:!1,fontSize:n.blackboardToolsInfo.text,useToolColor:n.useToolColor,pencilWidth:s,deawPermission:a.deawPermission,watermarkImageScalc:a.watermarkImageScalc,associatedMsgID:a.associatedMsgID}):void 0),y.default.createElement("ul",{className:"blackboard-tool clear-float",style:{display:a.deawPermission?"":"none"}},y.default.createElement("li",{className:"blackboard-tool-option"+("tool_pencil"===i?" active":"")},y.default.createElement("button",{id:"video_blackboard_tool_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===i?" active":""),title:T.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleToolClick.bind(e,"tool_pencil")})),y.default.createElement("li",{className:"blackboard-tool-option"+("tool_text"===i?" active":""),style:{display:"none"}}," ",y.default.createElement("button",{id:"video_blackboard_tool_text",className:"tool-btn text-icon"+("tool_text"===i?" active":""),title:T.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleToolClick.bind(e,"tool_text")})),y.default.createElement("li",{className:"blackboard-tool-option"+("tool_eraser"===i?" active":"")},y.default.createElement("button",{id:"video_blackboard_tool_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===i?" active":""),title:T.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleToolClick.bind(e,"tool_eraser")})),"mobile"!==TK.SDKTYPE?y.default.createElement("li",{className:"blackboard-tool-option colors  add-position-relative"},y.default.createElement("button",{id:"video_blackboard_tool_color",className:"tool-btn colors-icon",title:T.default.language.languageData.header.tool.blackBoard.boardTool.color},y.default.createElement("span",{className:"current-color",style:{backgroundColor:n.useToolColor}})),y.default.createElement("div",{className:"blackboard-color-size-box"},y.default.createElement("ul",{className:"tool-size-container",id:"video_blackboard_tool_size"},y.default.createElement("li",{id:"video_blackboard_size_small",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_small",{pencil:5,text:30,eraser:30}),className:"size-small "+("blackboard_size_small"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},y.default.createElement("span",null)),y.default.createElement("li",{id:"video_blackboard_size_middle",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_middle",{pencil:15,text:36,eraser:90}),className:"size-middle "+("blackboard_size_middle"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},y.default.createElement("span",null)),y.default.createElement("li",{id:"video_blackboard_size_big",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_big",{pencil:30,text:72,eraser:150}),className:"size-big "+("blackboard_size_big"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},y.default.createElement("span",null))),y.default.createElement("ol",{className:"colors-container"},l))):l))}}]),t}(y.default.Component);t.default=A},eQoU:function(e,t,a){t.f=a("QjZ5")},eWTT:function(e,t,a){var n=a("MITN");n(n.S+n.F*!a("M7ni"),"Object",{defineProperties:a("Qlg0")})},esCQ:function(e,t,a){var n=a("BLKo");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},gDty:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=a("hRKE"),i=n(o),r=a("aA9S"),l=n(r);Object.customAssign=function(e){try{return l.default.apply(l.default,arguments)}catch(r){for(var t=L.Utils.toJsonParse(L.Utils.toJsonStringify(e)),a=1;a<arguments.length;a++){var n=arguments[a];if(n&&"object"===(void 0===n?"undefined":(0,i.default)(n)))for(var o in n)t[o]=n[o]}return e=t||{}}}},gE2q:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},hRKE:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a("2LoE"),i=n(o),r=a("Yyxk"),l=n(r),s="function"==typeof l.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":typeof e};t.default="function"==typeof l.default&&"symbol"===s(i.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":void 0===e?"undefined":s(e)}},hdvR:function(e,t,a){a("j0bN"),e.exports=a("UusJ").Object.values},hghX:function(e,t,a){var n=a("7Tch"),o=a("NUpW"),i=a("nUWZ")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},iKyp:function(e,t,a){var n=a("BLKo"),o=a("QjZ5")("toStringTag"),i="Arguments"==n(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,a,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=r(t=Object(e),o))?a:i?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},j0bN:function(e,t,a){var n=a("MITN"),o=a("2P8z")(!1);n(n.S,"Object",{values:function(e){return o(e)}})},"kU6/":function(e,t,a){var n=a("MITN");n(n.S,"Object",{setPrototypeOf:a("BAOS").set})},lIme:function(e,t,a){var n=a("KFas").document;e.exports=n&&n.documentElement},liLe:function(e,t,a){e.exports={default:a("adMp"),__esModule:!0}},lw6p:function(e,t,a){var n=a("tXsA"),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},nBsG:function(e,t,a){"use strict";var n=a("OtAM"),o=a("/a/u"),i=a("K0/C"),r=a("NUpW"),l=a("esCQ"),s=Object.assign;e.exports=!s||a("xVzf")(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=s({},e)[a]||Object.keys(s({},t)).join("")!=n})?function(e,t){for(var a=r(e),s=arguments.length,d=1,c=o.f,u=i.f;s>d;)for(var h,f=l(arguments[d++]),g=c?n(f).concat(c(f)):n(f),p=g.length,m=0;p>m;)u.call(f,h=g[m++])&&(a[h]=f[h]);return a}:s},nUWZ:function(e,t,a){var n=a("CTvS")("keys"),o=a("GZtZ");e.exports=function(e){return n[e]||(n[e]=o(e))}},nrcm:function(e,t,a){a("uy8w");var n=a("UusJ").Object;e.exports=function(e,t){return n.create(e,t)}},nwJ7:function(e,t,a){var n=a("7Tch"),o=a("DGQG"),i=a("pTZr")(!1),r=a("nUWZ")("IE_PROTO");e.exports=function(e,t){var a,l=o(e),s=0,d=[];for(a in l)a!=r&&n(l,a)&&d.push(a);for(;t.length>s;)n(l,a=t[s++])&&(~i(d,a)||d.push(a));return d}},pBXl:function(e,t,a){var n=a("MITN");n(n.S+n.F*!a("M7ni"),"Object",{defineProperty:a("qRYU").f})},pTZr:function(e,t,a){var n=a("DGQG"),o=a("sSQC"),i=a("lw6p");e.exports=function(e){return function(t,a,r){var l,s=n(t),d=o(s.length),c=i(r,d);if(e&&a!=a){for(;d>c;)if((l=s[c++])!=l)return!0}else for(;d>c;c++)if((e||c in s)&&s[c]===a)return e||c||0;return!e&&-1}}},ppOE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"}}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}}}};t.default=n},qCHB:function(e,t,a){e.exports={default:a("Ay9U"),__esModule:!0}},qRYU:function(e,t,a){var n=a("Dc6E"),o=a("DnLf"),i=a("xXu8"),r=Object.defineProperty;t.f=a("M7ni")?Object.defineProperty:function(e,t,a){if(n(e),t=i(t,!0),n(a),o)try{return r(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},qWNy:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},qd7y:function(e,t,a){"use strict";var n=a("OTtE"),o=a("+BLA"),i=a("Macf"),r={};a("OCs/")(r,a("QjZ5")("iterator"),function(){return this}),e.exports=function(e,t,a){e.prototype=n(r,{next:o(1,a)}),i(e,t+" Iterator")}},rLQK:function(e,t,a){var n=a("Dc6E"),o=a("X6b2");e.exports=a("UusJ").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},rhsp:function(e,t,a){a("CLwS"),e.exports=a("UusJ").Object.keys},rkp3:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("Yarq"),i=n(o),r=a("AA3o"),l=n(r),s=a("xSur"),d=n(s),c=a("UzKs"),u=n(c),h=a("Y7Ml"),f=n(h),g=a("jyQm"),p=n(g),m=a("yE5a"),v=n(m),b=a("T+56"),y=n(b),S=a("HUPQ"),w=n(S),T=a("eOcM"),_=n(T),I=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={updateState:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){y.default.Window.addEventListener(TkConstant.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",this.handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone.bind(this),this.listernerBackupid),v.default.getTkRoom()&&v.default.getTkRoom().onPageFinished&&v.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){y.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerOnResize",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"callAllWrapOnClick",value:function(e){y.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"render",value:function(){return p.default.createElement("section",{className:"app-mobile  all-container "+("phone"===w.default.mobileDeviceType?"phone":"pad"),onTouchStart:this.callAllWrapOnClick.bind(this)},p.default.createElement(_.default,{containerWidthAndHeight:{width:w.default.windowInnerWidth,height:w.default.windowInnerHeight}}))}}]),t}(p.default.Component);t.default=I},sSQC:function(e,t,a){var n=a("tXsA"),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},tXsA:function(e,t){var a=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:a)(e)}},uObV:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("ZLEe"),i=n(o),r=a("Q+Ik"),l=n(r),s=a("KH7x"),d=n(s),c=a("hRKE"),u=n(c),h=a("MgeX"),f=n(h),g=a("HzJ8"),p=n(g),m=a("AA3o"),v=n(m),b=a("xSur"),y=n(b);String.prototype.colorHex=function(){var e=this,t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(e)){for(var a=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),n="#",o=0;o<a.length;o++){var i=Number(a[o]).toString(16);"0"===i&&(i+=i),n+=i}return 7!==n.length&&(n=e),n}if(!t.test(e))return e;var r=e.replace(/#/,"").split("");if(6===r.length)return e;if(3===r.length){for(var l="#",s=0;s<r.length;s+=1)l+=r[s]+r[s];return l}},String.prototype.colorRgb=function(){var e=this.toLowerCase(),t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(4===e.length){for(var a="#",n=1;n<4;n+=1)a+=e.slice(n,n+1).concat(e.slice(n,n+1));e=a}for(var o=[],i=1;i<7;i+=2)o.push(parseInt("0x"+e.slice(i,i+2)));return"RGB("+o.join(",")+")"}return e};var S={addEvent:function(e,t,a,n){n=void 0!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,n){e.addEventListener?e.removeEventListener(t,a,n):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},getOffset:function(e){for(var t={left:e.offsetLeft,top:e.offsetTop};e!=document.body;)e=e.offsetParent,t.left+=e.offsetLeft,t.top+=e.offsetTop;return t}},w=function(){function e(){(0,v.default)(this,e),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,watermarkImageScalc:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!1,saveUndoStack:!0,remindContentTime:3e3,showRemoteRemindContent:!1,showMyselfRemindContent:!1},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={},this.basicTemplateWhiteboardSignallingChildrenStackStorage={}}return(0,y.default)(e,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){var t=this;/^tool_/.test(e)&&(t.commonActiveTool=e);var a=!0,n=!1,o=void 0;try{for(var i,r=(0,p.default)((0,f.default)(t.whiteboardInstanceStore));!(a=(i=r.next()).done);a=!0){var l=i.value;if(!l.proprietaryTools){var s=l.id;t.activeWhiteboardTool(e,s)}}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"===(void 0===e?"undefined":(0,u.default)(e))&&Object.customAssign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"===(void 0===e?"undefined":(0,u.default)(e))&&Object.customAssign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType||"changeZoomEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,a);else{var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var o=n.split("_"),i=o[1],r=o[2],l=this.getWhiteboardFiledata(t);l.fileid==i&&l.currpage==r?(this._receiveSnapshot(e,a),a.showRemoteRemindContent&&e.remindContent&&this._handlerShowRemoteRemindContentFromPubmsgData(a,e)):null==a.waitingProcessShapeData[n]||void 0==a.waitingProcessShapeData[n]?(a.waitingProcessShapeData[n]=[],a.waitingProcessShapeData[n].push(e)):a.waitingProcessShapeData[n].push(e)}}}}},{key:"handlerDelmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"delmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="delmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var o=n.split("_"),i=o[1],r=o[2],l=this.getWhiteboardFiledata(t);e.source="delmsg",l.fileid==i&&l.currpage==r?this._receiveSnapshot(e,a):null==a.waitingProcessShapeData[n]||void 0==a.waitingProcessShapeData[n]?(a.waitingProcessShapeData[n]=[],a.waitingProcessShapeData[n].push(e)):a.waitingProcessShapeData[n].push(e)}}}},{key:"handlerMsglist_SharpsChange",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.data&&"string"==typeof a.data&&(a.data=JSON.parse(a.data)),void 0!==a.data.whiteboardID&&void 0!==a.data.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID]&&this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]&&(this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]=null,delete this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]),this._saveBasicTemplateWhiteboardSignallingData(a,"msglist");var n=a.data.whiteboardID,o=this._getWhiteboardInstanceById(n);if(o){if(null!=a.data&&("shapeSaveEvent"===a.data.eventType||"clearEvent"===a.data.eventType||"redoEvent"===a.data.eventType||"changeZoomEvent"===a.data.eventType)){a.source="msglist";var i=a.id.substring(a.id.lastIndexOf("###_")+4);null==o.waitingProcessShapeData[i]||void 0==o.waitingProcessShapeData[i]?(o.waitingProcessShapeData[i]=[],o.waitingProcessShapeData[i].push(a)):o.waitingProcessShapeData[i].push(a)}}else a.source="msglist",this.awaitSaveToWhiteboardInstanceSignallingArray.push(a)}}},{key:"preloadWhiteboardImg",value:function(e,t){if(!e)return void L.Logger.warning("preload img url is not esixt!");var a=new Image;a.onload=function(){t&&"function"==typeof t&&t()},a.src=e}},{key:"productionWhiteboard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.whiteboardElementId,a=e.thumbnailId,n=e.productionOptions,o=void 0===n?{}:n,i=e.handler,r=void 0===i?{}:i,l=e.id,s=this;if(!t)return void L.Logger.error("whiteboardElementId is required!");var d=s._getWhiteboardInstanceID(l),c=s._getWhiteboardInstanceByID(d);if(c)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+d+") fails, the whiteboard already exists!"),c;c={};var u=document.getElementById(t);if(!u)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),c;var h=document.createElement("div"),f=t+"_whiteboardInstance";return h.className="whiteboard-instance-element",h.id=f,u.appendChild(h),o=Object.customAssign({},s.defaultProductionOptions,o),s.whiteboardInstanceStore[d]=c,c.filedata=o.filedata||{},c.baseWhiteboardWidth=o.baseWhiteboardWidth,c.whiteboardInstanceID=d,c.parcelAncestorElementId=o.parcelAncestorElementId,c.isBaseboard=o.isBaseboard,c.needLooadBaseboard=o.needLooadBaseboard,c.dependenceBaseboardWhiteboardID=o.dependenceBaseboardWhiteboardID,c.watermarkImageScalc=o.watermarkImageScalc,c.whiteboardMagnification=o.whiteboardMagnification,c.remindContentTime=o.remindContentTime,c.showRemoteRemindContent=o.showRemoteRemindContent,c.showMyselfRemindContent=o.showMyselfRemindContent,c.associatedMsgID=o.associatedMsgID,c.associatedUserID=o.associatedUserID,c.proprietaryTools=o.proprietaryTools,c.minHeight=o.minHeight,c.rotateDeg=o.rotateDeg,c.deawPermission=o.deawPermission,c.tempDeawPermission=o.tempDeawPermission,c.nickname=o.nickname,c.userid=o.userid,c.whiteboardToolsInfo=Object.customAssign({},s.whiteboardToolsInfo),o.primaryColor&&(c.whiteboardToolsInfo.primaryColor=o.primaryColor),o.secondaryColor&&(c.whiteboardToolsInfo.secondaryColor=o.secondaryColor),o.backgroundColor&&(c.whiteboardToolsInfo.backgroundColor=o.backgroundColor),c.saveRedoStack=o.saveRedoStack,c.saveUndoStack=o.saveUndoStack,c.imageThumbnailId=o.imageThumbnailId,c.imageThumbnailTipContent=o.imageThumbnailTipContent,c.registerWhiteboardToolsList={},c.stackStorage={},c.handler={},c.handler.sendSignallingToServer=r.sendSignallingToServer,c.handler.delSignallingToServer=r.delSignallingToServer,c.handler.resizeWhiteboardSizeCallback=r.resizeWhiteboardSizeCallback,c.handler.noticeUpdateToolDescCallback=r.noticeUpdateToolDescCallback,c.active=!0,c.containerWidthAndHeight=o.containerWidthAndHeight,c.useToolKey=o.useToolKey,c.waitingProcessShapeData={},c.whiteboardElementId=t,c.whiteboardElement=u,c.whiteboardInstanceElementId=f,c.whiteboardInstanceElement=h,c.id=l,c.thumbnailId=a,c.lc=window.LC.init(c.whiteboardInstanceElement),c.lc.backingScale=1,c.lc.setColor("primary",c.whiteboardToolsInfo.primaryColor),c.lc.setColor("secondary",c.whiteboardToolsInfo.secondaryColor),c.lc.setColor("background",c.whiteboardToolsInfo.backgroundColor),c.lc.setWatermarkImageToLcBackground(!1),c.lc.setZoom(1),c.lc.setPan(0,0),c.lc.on("shapeSave",s._handlerShapeSaveEvent.bind(s,c)),c.lc.on("undo",s._handlerUndoEvent.bind(s,c)),c.lc.on("redo",s._handlerRedoEvent.bind(s,c)),c.lc.on("clear",s._handlerClearEvent.bind(s,c)),c.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(s,c)),c.activeTool=void 0,o.whiteboardClear&&s.clearWhiteboardAllDataById(l),void 0!==c.dependenceBaseboardWhiteboardID&&void 0!==c.id&&s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID]&&s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]&&(c.isBaseboard||(c.stackStorage=Object.customAssign({},s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id])),s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]=null,delete s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]),s._changeWhiteboardDeawPermission(c.deawPermission,c),s._changeWhiteboardTemporaryDeawPermission(c.tempDeawPermission,c),s._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(c),s.activeWhiteboardTool(c.proprietaryTools?c.useToolKey?c.useToolKey:"tool_pencil":s.commonActiveTool,l),s._zoomIsDisable(c),s._actionIsDisable(c),s._noticeUpdateToolDesc(c),s._resizeWhiteboardHandler(c),c}},{key:"updateImageThumbnailId",value:function(e,t){var a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e);a.imageThumbnailId=t,this._saveImageBase64ToImageThumbnail(a)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var a=t.saveRedoStack,n=t.saveUndoStack,o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e);o.saveRedoStack=void 0!=a?a:o.saveRedoStack,o.saveUndoStack=void 0!=n?n:o.saveUndoStack}},{key:"updateIsBaseboard",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e);n.isBaseboard=t}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e);n.dependenceBaseboardWhiteboardID=t}},{key:"updateShowRemindContent",value:function(e,t,a){var n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e);n.showRemoteRemindContent=t||n.showRemoteRemindContent,n.showMyselfRemindContent=a||n.showMyselfRemindContent}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e);n.associatedMsgID=t}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e);n.associatedUserID=t}},{key:"hasWhiteboardById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return void 0!==a&&null!==a}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[clear]There are no white board Numbers that belong to id "+e);t._clearWhiteboardAllDataByInstance(a)}},{key:"productionSpecialId",value:function(e){return this.specialWhiteboardInstanceIDPrefix+e}},{key:"destroyWhiteboardInstance",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e);t._destroyWhiteboardInstance(a)}},{key:"clearRedoAndUndoStack",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e);a._clearRedoAndUndoStack(n,t)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e);a.whiteboardMagnification=t.defaultProductionOptions.whiteboardMagnification,t._zoomIsDisable(a),t._resizeWhiteboardHandler(a)}},{key:"updateWhiteboardMagnification",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e);n.whiteboardMagnification=t}},{key:"updateWhiteboardWatermarkImageScalc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultProductionOptions.watermarkImageScalc,a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[updateWhiteboardWatermarkImageScalc]There are no white board Numbers that belong to id "+e);this._updateWhiteboardWatermarkImageScalc(a,t)}},{key:"setWhiteboardWatermarkImage",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.resetDedaultWhiteboardMagnification,o=void 0===n||n,i=this;L.Logger.debug("setWhiteboardWatermarkImage watermarkImageUrl:"+t);var r=i._getWhiteboardInstanceById(e);if(!r)return void L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e);r.lc.watermarkImage=null,o&&i.resetDedaultWhiteboardMagnification(e),t?(i.showWhiteboardCanvasBackground(e),i._showWhiteboardLoading(r),clearTimeout(r.setWhiteboardWatermarkImageTimer),r.setWhiteboardWatermarkImageTimer=setTimeout(function(){var e=new Image;e.onload=function(){var t=e.width/e.height;r.lc.setWatermarkImage(e),i._resizeWhiteboardByScalc(r,{watermarkImage:e,watermarkImageScalc:t}),i._hideWhiteboardLoading(r)},e.src=t},150)):(i.hideWhiteboardCanvasBackground(e),r.lc.watermarkScale=1,i._resizeWhiteboardByScalc(r,{isChangeWatermarkScale:!1}),i._hideWhiteboardLoading(r),r.lc.watermarkImage=null,r.lc.customCanvasBackgroundElement.style.backgroundImage="",i._hideWhiteboardLoading(r))}},{key:"resizeWhiteboardHandler",value:function(e){var t=this;if(void 0===e){var a=!0,n=!1,o=void 0;try{for(var i,r=(0,p.default)((0,f.default)(t.whiteboardInstanceStore));!(a=(i=r.next()).done);a=!0){var l=i.value;t._resizeWhiteboardHandler(l)}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}}else{var s=t._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);t._resizeWhiteboardHandler(s)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.width,n=t.height,o=this,i=o._getWhiteboardInstanceById(e);return i?void 0===a||void 0===n?void L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+a+" , height:"+n+"]!"):(i.containerWidthAndHeight={width:a,height:n},void o._resizeWhiteboardHandler(i)):void L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e);a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="none",a.lc.customCanvasBackgroundElement.style.display="none")}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e);a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="",a.lc.customCanvasBackgroundElement.style.display="")}},{key:"hideWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fontSize,n=t.fontFamily,o=t.fontStyle,i=t.fontWeight,r=this,l=r._getWhiteboardInstanceById(e);if(!l)return void L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e);l.whiteboardToolsInfo.fontSize=void 0!=a?a:l.whiteboardToolsInfo.fontSize,l.whiteboardToolsInfo.fontFamily=void 0!=n?n:l.whiteboardToolsInfo.fontFamily,l.whiteboardToolsInfo.fontStyle=void 0!=o?o:l.whiteboardToolsInfo.fontStyle,l.whiteboardToolsInfo.fontWeight=void 0!=i?i:l.whiteboardToolsInfo.fontWeight,r._updateTextFont(l)}},{key:"updateEraserWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.eraserWidth,n=this,o=n._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e);o.whiteboardToolsInfo.eraserWidth=void 0!=a?a:o.whiteboardToolsInfo.eraserWidth,n._updateEraserWidth(o)}},{key:"updatePencilWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.pencilWidth,n=this,o=n._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e);o.whiteboardToolsInfo.pencilWidth=void 0!=a?a:o.whiteboardToolsInfo.pencilWidth,n._updatePencilWidth(o)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e);t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&Object.customAssign(n.whiteboardToolsInfo,t)}},{key:"updateShapeWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.shapeWidth,n=this,o=n._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e);o.whiteboardToolsInfo.shapeWidth=void 0!=a?a:o.whiteboardToolsInfo.shapeWidth,n._updateShapeWidth(o)}},{key:"updateColor",value:function(e,t){var a=this;if(t&&"object"===(void 0===t?"undefined":(0,u.default)(t))){var n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var o=!0,i=!1,r=void 0;try{for(var s,c=(0,p.default)((0,l.default)(t));!(o=(s=c.next()).done);o=!0){var h=s.value,f=(0,d.default)(h,2),g=f[0],m=f[1];n.whiteboardToolsInfo[g+"Color"]=m}}catch(e){i=!0,r=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw r}}a._updateColor(n,t)}}},{key:"activeWhiteboardTool",value:function(e,t){var a=this;if(void 0===a.useWhiteboardTool[e])return void L.Logger.error("The whiteboard does not have the "+e+" tool!");if(void 0===t||null===t)return void L.Logger.error("[activeWhiteboardTool]id is undefined or null ");var n=a._getWhiteboardInstanceById(t);if(!n)return void L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t);if(/^tool_/.test(e))if(n.activeTool=e,a._setWhiteboardTools(e,n),a._handlerActiveToolLaser(e,n),"tool_text"==e?a._updateTextFont(n):"tool_eraser"==e?a._updateEraserWidth(n):"tool_pencil"==e||"tool_highlighter"==e||"tool_line"==e||"tool_arrow"==e||"tool_dashed"==e?a._updatePencilWidth(n):"tool_rectangle"!=e&&"tool_rectangle_empty"!=e&&"tool_ellipse"!=e&&"tool_ellipse_empty"!=e&&"tool_polygon"!=e||a._updateShapeWidth(n),"tool_ellipse_empty"==e||"tool_rectangle_empty"==e?n.lc.setColor("secondary","transparent"):n.lc.setColor("secondary",n.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var o=n.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");n.lc.setColor("primary",o)}else n.lc.setColor("primary",n.whiteboardToolsInfo.primaryColor);else/^action_/.test(e)?("action_undo"===e?n.lc.undo():"action_redo"===e?n.lc.redo():"action_clear"===e&&(n.lc.clear(),this._removeAllRemindContent(n)),a._actionIsDisable(n)):/^zoom_/.test(e)&&("zoom_big"===e?n.whiteboardMagnification<a.maxMagnification&&(n.whiteboardMagnification+=.5):"zoom_small"===e?n.whiteboardMagnification>a.minMagnification&&(n.whiteboardMagnification-=.5):"zoom_default"===e&&(n.whiteboardMagnification=a.defaultProductionOptions.whiteboardMagnification),n.whiteboardMagnification>a.maxMagnification?n.whiteboardMagnification=a.maxMagnification:n.whiteboardMagnification<a.minMagnification&&(n.whiteboardMagnification=a.minMagnification),a._zoomIsDisable(n),a._resizeWhiteboardHandler(n))}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,n=void 0;if(void 0!=t&&!(n=a._getWhiteboardInstanceById(t)))return void L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t);a._changeWhiteboardTemporaryDeawPermission(e,n)}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var a=this,n=void 0;if(void 0!=t&&!(n=a._getWhiteboardInstanceById(t)))return void L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t);a._changeWhiteboardDeawPermission(e,n)}},{key:"registerWhiteboardTools",value:function(e,t){var a=this;if(!t||"object"!==(void 0===t?"undefined":(0,u.default)(t)))return void L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!");var n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e);var o={},i=!0,r=!1,s=void 0;try{for(var c,h=(0,p.default)((0,l.default)(t));!(i=(c=h.next()).done);i=!0){var f=c.value,g=(0,d.default)(f,2),m=g[0],v=g[1];void 0!==a.useWhiteboardTool[m]?(o[m]=a._productionToolDesc(m,v),a.useWhiteboardTool[m]=!0):L.Logger.warning("The whiteboard does not have the "+m+" tool!")}}catch(e){r=!0,s=e}finally{try{!i&&h.return&&h.return()}finally{if(r)throw s}}n.registerWhiteboardToolsList=o,n.isRegisterWhiteboardTool=!0,a._zoomIsDisable(n),a._zoomIsDisable(n),a._noticeUpdateToolDesc(n)}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e);var a=!0,n=!1,o=void 0;try{for(var r,l=(0,p.default)((0,i.default)(t.filedata));!(a=(r=l.next()).done);a=!0)return r.value,!0}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}return!1}},{key:"updateWhiteboardFiledata",value:function(e,t){var a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e);this._updateWhiteboardFiledata(a,t)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?Object.customAssign({},t.filedata):void L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.loadRedoStack,n=void 0!==a&&a,o=t.loadUndoStack,i=void 0===o||o,r=t.callback,l=this._getWhiteboardInstanceById(e);if(!l)return void L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e);this._clearRedoAndUndoStack(l),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(l);var s=l.filedata,d=s.fileid,c=s.currpage;if(i){var u=l.stackStorage["undoStack_"+d+"_"+c];if(u&&u.length>0){for(var h=[],f=0;f<u.length;f++){var g=u[f];"AddShapeAction"===g.actionName?h.push(g):"ClearAction"===g.actionName&&(h.map(function(e,t){l.lc.saveShape(e.shape,!1,null,!0)}),h.length=0,l.lc.clear(!1,g.id),this._removeAllRemindContent(l))}h.map(function(e,t){var a=!0;t===h.length-1&&(a=!1),l.lc.saveShape(e.shape,!1,null,a)}),h.length=0}}if(n){var p=l.stackStorage["redoStack_"+d+"_"+c];if(p&&p.length>0){for(var m=[],v=p.length-1;v>=0;v--){var b=p[v];"AddShapeAction"===b.actionName?m.push(b):"ClearAction"===b.actionName&&(m.map(function(e,t){l.lc.saveShape(e.shape,!1,null,!0)}),m.length=0,l.lc.clear(!1,b.id),this._removeAllRemindContent(l))}m.map(function(e,t){var a=!0;t===m.length-1&&(a=!1),l.lc.saveShape(e.shape,!1,null,a)}),m.length=0;for(var y=0;y<p.length;y++)l.lc.undo(!1)}}if(void 0==l.waitingProcessShapeData||null==l.waitingProcessShapeData)l.waitingProcessShapeData={};else{var S=l.waitingProcessShapeData["SharpsChange_"+d+"_"+c];null!=S&&void 0!=S&&S.length>0&&(this._batchReceiveSnapshot(S,l),l.waitingProcessShapeData["SharpsChange_"+d+"_"+c]=null,delete l.waitingProcessShapeData["SharpsChange_"+d+"_"+c])}this._actionIsDisable(l),r&&"function"==typeof r&&r()}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.saveRedoStack,n=t.saveUndoStack,o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e);a=void 0!=a?a:o.saveRedoStack,n=void 0!=n?n:o.saveUndoStack;var i=this.getWhiteboardFiledata(e),r=i.fileid,l=i.currpage;n&&(o.stackStorage["undoStack_"+r+"_"+l]=o.lc.undoStack.slice(0)),a&&(o.stackStorage["redoStack_"+r+"_"+l]=o.lc.redoStack.slice(0))}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e);this._showWhiteboardLoading(t)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e);this._hideWhiteboardLoading(t)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?"Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState:void L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e)}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.isResize,n=void 0!==a&&a,o=this._getWhiteboardInstanceById(e);return o?o.lc&&o.lc.canvas?(0===o.lc.canvas.width||0===o.lc.canvas.height)&&(n&&this._resizeWhiteboardHandler(o),!0):void 0:void L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e);var n=this._convertCanvasToImageBase64(a,t);n=n.replace(function(e){return e=e.toLocaleLowerCase().replace(/jpg/i,"jpeg"),"image/"+e.match(/png|jpeg|bmp|gif/)[0]}(t),"image/octet-stream");var o=(a.nickname?a.nickname+"_":"")+a.id+"_"+(new Date).getTime()+"."+t;!function(e,t){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=e,a.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}(n,o)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.clear,n=void 0===a||a,o=t.redo,i=void 0===o||o,r=t.undo,l=void 0===r||r,s=this;n&&s._clearLc(e,{triggerEvent:!1}),i&&s._clearLcRedoStack(e),l&&s._clearLcUndoStack(e),s._actionIsDisable(e)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&(t.currpage=Number(t.currpage),t.pagenum=Number(t.pagenum),t.pptslide=Number(t.pptslide),t.pptstep=Number(t.pptstep),t.steptotal=Number(t.steptotal),Object.customAssign(e.filedata,t))}},{key:"_batchReceiveSnapshot",value:function(e,t){var a=this;if(!Array.isArray(e))return void L.Logger.error("shapesArray must be an array!");e.forEach(function(n,o){var i=!0;o===e.length-1&&(i=!1),a._handlerRemoteDataToWhiteboard(n,i,t)}),a._actionIsDisable(t)}},{key:"_receiveSnapshot",value:function(e,t){var a=this;a._handlerRemoteDataToWhiteboard(e,!1,t),a._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(a.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(a,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(a.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(a,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var n=a.lc.redoStack.length-1;n>=0;n--)if(e.data.shapeId===a.lc.redoStack[n].shapeId){a.lc.redoStack.splice(n,1);break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t)}else e.data.actionName&&"ClearAction"===e.data.actionName&&(a.lc.clear(!1,null),this._removeAllRemindContent(a));break;case"clearEvent":a.lc.clear(!1,null),this._removeAllRemindContent(a);break;case"laserMarkEvent":var o=a.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":o.style.display="block";break;case"hide":o.style.display="none";break;case"move":if(e.data&&e.data.laser){var i=e.data.laser.left,r=e.data.laser.top;o.style.left=i+"%",o.style.top=r+"%"}}}}},{key:"_productionToolDesc",value:function(e,t){return{toolKey:e,disabled:!1}}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&(clearTimeout(e.noticeUpdateToolDescTimer),e.noticeUpdateToolDescTimer=setTimeout(function(){e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)},250))}},{key:"_updateToolDesc",value:function(e,t,a){if(e.registerWhiteboardToolsList[t]){var n=!0,o=!1,i=void 0;try{for(var r,s=(0,p.default)((0,l.default)(a));!(n=(r=s.next()).done);n=!0){var c=r.value,u=(0,d.default)(c,2),h=u[0],f=u[1];void 0!==e.registerWhiteboardToolsList[t][h]&&(e.registerWhiteboardToolsList[t][h]=f)}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}}}},{key:"_batchUpdateToolDesc",value:function(e,t){var a=this;if(!Array.isArray(t))return void L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!");var n=!0,o=!1,i=void 0;try{for(var r,l=(0,p.default)(t);!(n=(r=l.next()).done);n=!0){var s=r.value;Array.isArray(s)&&a._updateToolDesc(e,s[0],s[1])}}catch(e){o=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}}},{key:"_setWhiteboardTools",value:function(e,t){var a=this,n=function(t){var n=a._productionToolByCore(e,t);t.lc.setTool(n)};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_productionToolByCore",value:function(e,t){var a=this,n=void 0;if(void 0===a.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),n;switch(e){case"tool_pencil":case"tool_highlighter":n=new LC.tools.Pencil(t.lc);break;case"tool_line":n=new LC.tools.Line(t.lc);break;case"tool_arrow":n=new LC.tools.Line(t.lc),n.hasEndArrow=!0;break;case"tool_dashed":n=new LC.tools.Line(t.lc),n.isDashed=!0;break;case"tool_eraser":n=new LC.tools.Eraser(t.lc);break;case"tool_text":n=new LC.tools.Text(t.lc);break;case"tool_rectangle":case"tool_rectangle_empty":n=new LC.tools.Rectangle(t.lc);break;case"tool_ellipse":case"tool_ellipse_empty":n=new LC.tools.Ellipse(t.lc);break;case"tool_polygon":n=new LC.tools.Polygon(t.lc);break;case"tool_eyedropper":n=new LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":n=new LC.tools.SelectShape(t.lc);break;case"tool_mouse":case"tool_laser":n=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),n=t.lc.tool}return n}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this,a=t.uniqueWhiteboard||void 0==e||null==e?t.whiteboardInstanceDefaultID:t.whiteboardInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(t.specialWhiteboardInstanceIDPrefix,"g").test(e)&&(a=e),a}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this,a=t._getWhiteboardInstanceID(e);return t.whiteboardInstanceStore[a]}},{key:"_getWhiteboardInstanceByID",value:function(e){return this.whiteboardInstanceStore[e]}},{key:"_resizeWhiteboardByScalc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.watermarkImage,n=t.isChangeCanvas,o=void 0===n||n,i=t.isChangeWatermarkScale,r=void 0===i||i,l=t.watermarkImageScalc;l=void 0!==l?l:e.watermarkImageScalc;var s=e.lc;if(s){var d=e.whiteboardElement,c=e.whiteboardInstanceElement,u=e.containerWidthAndHeight.width,h=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId&&document.getElementById(e.parcelAncestorElementId)){var f=document.getElementById(e.parcelAncestorElementId);u=f.clientWidth,h=f.clientHeight}var g={},p=0,m=0,v=0,b=0;if(h*l<u?(p=Math.round(h*l*e.whiteboardMagnification),m=Math.round(h*e.whiteboardMagnification),d.style.width=p+"px",d.style.height=m+"px",c.style.width=p+"px",c.style.height=m+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*l,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",g.minWidth=v+"px",g.minHegiht=b+"px"),g.top="0%",g.left="50%",g.marginTop="0px",g.marginLeft=-p/2+"px",g.width=p+"px",g.height=m+"px"):(p=Math.round(u*e.whiteboardMagnification),m=Math.round(u/l*e.whiteboardMagnification),d.style.width=p+"px",d.style.height=m+"px",c.style.width=p+"px",c.style.height=m+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*l,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",g.minWidth=v+"px",g.minHegiht=b+"px"),g.top="50%",g.left="0%",g.marginTop=-m/2+"px",g.marginLeft="0px",g.width=p+"px",g.height=m+"px"),o){s.respondToSizeChange();var y=c.clientWidth,S=c.clientHeight,w=(y+S)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*l);if(s.setZoom(w),s.setPan(0,0),r&&a){var T=a.width,_=a.height,I=s.backgroundCanvas.width/T,k=s.backgroundCanvas.height/_,E=(I+k)/2;s.watermarkScale=E,s.setWatermarkImage(a)}}e.whiteboardMagnification>1?g.addClassName="custom-scroll-bar":g.addClassName="",e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback&&e.handler.resizeWhiteboardSizeCallback(g)}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){if(!e)return void L.Logger.error("[_clear]The whiteboard instance does not exist!");e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},this._removeAllRemindContent(e)}},{key:"_resizeWhiteboardHandler",value:function(e){var t=this;if(e&&e.lc){var a=e.lc.watermarkImage;if(a&&a.src){var n=a.width/a.height;t._resizeWhiteboardByScalc(e,{watermarkImage:a,watermarkImageScalc:n})}else t._resizeWhiteboardByScalc(e,{isChangeWatermarkScale:!1});this._updateAllRemindContent(e)}}},{key:"_updateWhiteboardWatermarkImageScalc",value:function(e,t){e.watermarkImageScalc=t,this._resizeWhiteboardHandler(e)}},{key:"_productionWhiteboardRemindContent",value:function(e,t,a,n,o){var i=this;if(e&&n)try{if(e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords){var r=e.lc.drawingCoordsToClientCoords(t,a);if(r){var l=document.createElement("span");l.className="remind-content",l.style.position="absolute",l.style.left=r.x+"px",l.style.top=r.y+"px",l.innerHTML=n;var s=o?"whiteboard_remind_"+o:"whiteboard_remind_"+(new Date).getTime();l.setAttribute("data-position-x",t),l.setAttribute("data-position-y",a),l.setAttribute("id",s),e.lc.containerEl.parentNode.appendChild(l),setTimeout(function(){i._removeRemindContentByElementId(e,s),l=null},e.remindContentTime)}}}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&t.length>0)for(var a=0;a<t.length;a++){var n=t[a],o=Number(n.getAttribute("data-position-x")),i=Number(n.getAttribute("data-position-y")),r=e.lc.drawingCoordsToClientCoords(o,i);n.style.left=r.x+"px",n.style.top=r.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){if(e&&e.lc&&e.lc.containerEl.parentNode){var a=document.getElementById(t);a&&(a.innerHTML="",e.lc.containerEl.parentNode.removeChild(a),a=null)}}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&t.length>0)for(var a=t.length-1;a>=0;a--){var n=t[a];n.innerHTML="",e.lc.containerEl.parentNode.removeChild(n),n=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var a=this._convertCanvasToImageBase64(e,"jpg");t.src=a,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname)}}}},{key:"_destroyWhiteboardInstance",value:function(e){var t=this;clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),void 0===e.dependenceBaseboardWhiteboardID||e.isBaseboard||void 0===e.id||(t.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]?(t.saveWhiteboardStackToStorage(e.id,{saveRedoStack:e.saveRedoStack,saveUndoStack:e.saveUndoStack}),t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]=t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]||{},t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID][e.id]=Object.customAssign({},e.stackStorage)):t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]&&(t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]=null,delete t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID])),t.basicTemplateWhiteboardSignallingList[e.id]&&(t.basicTemplateWhiteboardSignallingList[e.id]=null,delete t.basicTemplateWhiteboardSignallingList[e.id]),t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]&&(t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]=null,delete t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]),t._clearWhiteboardAllDataByInstance(e);var a=e.whiteboardInstanceID,n=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),n?n.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var o=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;o&&(o.innerHTML="");var r=!0,l=!1,s=void 0;try{for(var d,c=(0,p.default)((0,i.default)(e));!(r=(d=c.next()).done);r=!0){var u=d.value;e[u]=null,delete e[u]}}catch(e){l=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}t.whiteboardInstanceStore[a]=null,delete t.whiteboardInstanceStore[a]}},{key:"_clearLc",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).triggerEvent,e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,n=function(t){var a=t.lc;if(a.isTmpDrawAble!==e){a.isTmpDrawAble=e;var n=a.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];a.isTmpDrawAble?(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" yes"):(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_changeWhiteboardDeawPermission",value:function(e,t){var a=this,n=function(t){var a=t.lc;if(a.isDrawAble!==e){a.isDrawAble=e;var n=a.containerEl.parentNode.getElementsByClassName("draw-permission")[0];a.isDrawAble?(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" yes"):(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_handlerActiveToolLaser",value:function(e,t){var a=this,n=function(t){var n=t.lc,o=n.containerEl.parentNode,i=o.getElementsByClassName("temporary-draw-permission")[0],r=o.getElementsByClassName("laser-mark")[0];if("tool_laser"===e)a._laserEventHandler_mousemove=a._laserEventHandler_mousemove||function(e){var n=e.pageX,o=e.pageY,l=i.getBoundingClientRect(),s=void 0,d=void 0,c=i.clientWidth,u=i.clientHeight;switch(t.rotateDeg){case 0:s=n-l.left,d=o-l.top;break;case 90:s=o-l.top,d=u-(n-l.left);break;case 180:s=c-(n-l.left),d=u-(o-l.top);break;case 270:s=c-(o-l.top),d=n-l.left;break;default:s=n-l.left,d=o-l.top}var h=s/c*100,f=d/u*100;return r.style.left=h+"%",r.style.top=f+"%",clearTimeout(t.laserTimer),t.laserTimer=setTimeout(function(){if(t.laserPosition&&(Math.abs(h-t.laserPosition.left)>.3||Math.abs(f-t.laserPosition.top)>.3)){var e={laser:{left:h,top:f},action:{actionName:"move"}};t.laserPosition=e.laser,a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",e)}},100),!1},a._laserEventHandler_mouseenter=a._laserEventHandler_mouseenter||function(e){var n={action:{actionName:"show"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",n),r.style.display="block",!1},a._laserEventHandler_mouseleave=a._laserEventHandler_mouseleave||function(e){var n={action:{actionName:"hide"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",n),r.style.display="none",!1},a._changeWhiteboardTemporaryDeawPermission(!1,t),t.selectLaserTool=!0,S.removeEvent(i,"mousemove",a._laserEventHandler_mousemove),S.removeEvent(o,"mouseenter",a._laserEventHandler_mouseenter),S.removeEvent(o,"mouseleave",a._laserEventHandler_mouseleave),i.className=i.className.replace(/ cursor-none/g,""),i.className+=" cursor-none",t.laserPosition=t.laserPosition||{left:0,top:0},S.addEvent(i,"mousemove",a._laserEventHandler_mousemove),S.addEvent(o,"mouseenter",a._laserEventHandler_mouseenter),S.addEvent(o,"mouseleave",a._laserEventHandler_mouseleave);else if(a._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,t),S.removeEvent(i,"mousemove",a._laserEventHandler_mousemove),S.removeEvent(o,"mouseenter",a._laserEventHandler_mouseenter),S.removeEvent(o,"mouseleave",a._laserEventHandler_mouseleave),i.className=i.className.replace(/ cursor-none/g,""),r.style.display="none",t.selectLaserTool){var l={action:{actionName:"hide"}};a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",l),t.selectLaserTool=!1}};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_sendSignallingToServer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.idPrefix,n=t.data,o=t.signallingName,i=t.assignId,r=t.do_not_save,l=t.expiresabs,s=t.associatedMsgID,d=t.associatedUserID;if(!e)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var c=e.filedata,u=c.currpage,h=c.fileid;if(void 0===u||void 0===h)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+u+","+h+"]!");n&&"string"==typeof n&&(n=JSON.parse(n)),n.whiteboardID=e.id,n.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(n.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),s=s||e.associatedMsgID,d=d||e.associatedUserID;var f=i||a+"###_"+o+"_"+h+"_"+u,g="__allExceptSender",p=Object.customAssign({},n);this._saveBasicTemplateWhiteboardSignallingData({signallingName:o,id:f,toID:g,data:p,do_not_save:r,expiresabs:l,associatedMsgID:s,associatedUserID:d},"pubmsg"),e.handler.sendSignallingToServer(o,f,g,n,r,l,s,d)}}},{key:"_delSignallingToServer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.idPrefix,n=t.data,o=t.signallingName,i=t.assignId;if(!e)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var r=e.filedata,l=r.currpage,s=r.fileid;if(void 0===l||void 0===s)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+l+","+s+"]!");n.whiteboardID=e.id,n.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(n.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var d=i||a+"###_"+o+"_"+s+"_"+l,c="__allExceptSender",u=Object.customAssign({},n);this._saveBasicTemplateWhiteboardSignallingData({signallingName:o,id:d,toID:c,data:u},"delmsg"),e.handler.delSignallingToServer(o,d,c,n)}}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,a){var n=this,o=void 0,i=void 0,r=void 0,l=void 0,s=void 0,d=void 0,c=void 0;switch(t){case"shapeSaveEvent":null==(d=LC.shapeToJSON(a.shape))||null==d.className||"LinePath"!=d.className&&"ErasedLinePath"!=d.className||(d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs,d.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})),c={eventType:t,actionName:a.action.actionName,shapeId:a.shapeId,data:d},o=a.shapeId,i=c,r="SharpsChange",l=void 0,s=void 0,n._sendSignallingToServer(e,{idPrefix:o,data:i,signallingName:r,assignId:l,do_not_save:s});break;case"undoEvent":if("AddShapeAction"===a.action.actionName){var u=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:u},o=u,i=c,r="SharpsChange",l=void 0,n._delSignallingToServer(e,{idPrefix:o,data:i,signallingName:r,assignId:l})}else if("ClearAction"===a.action.actionName){var h=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:h},o=h,i=c,r="SharpsChange",l=void 0,n._delSignallingToServer(e,{idPrefix:o,data:i,signallingName:r,assignId:l})}break;case"redoEvent":if("AddShapeAction"===a.action.actionName){null==(d=LC.shapeToJSON(a.action.shape))||null==d.className||"LinePath"!=d.className&&"ErasedLinePath"!=d.className||(d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs,d.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])}));var f=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:f,data:d};var g=f,p=c;n._sendSignallingToServer(e,{idPrefix:g,data:p,signallingName:"SharpsChange",assignId:void 0,do_not_save:void 0})}else if("ClearAction"===a.action.actionName){var m=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:m},o=m,i=c,r="SharpsChange",l=void 0,s=void 0,n._sendSignallingToServer(e,{idPrefix:o,data:i,signallingName:r,assignId:l,do_not_save:s})}break;case"clearEvent":var v=a.clearActionId;c={eventType:t,actionName:a.action.actionName,clearActionId:v},o=v,i=c,r="SharpsChange",l=void 0,s=void 0,n._sendSignallingToServer(e,{idPrefix:o,data:i,signallingName:r,assignId:l,do_not_save:s});break;case"laserMarkEvent":c={eventType:t,actionName:a.action.actionName},a&&a.laser&&(c.laser=a.laser),o="laserMarkEvent",i=c,r="SharpsChange",l=void 0,s=!0,n._sendSignallingToServer(e,{idPrefix:o,data:i,signallingName:r,assignId:l,do_not_save:s})}}},{key:"_updateTextFont",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.fontSize,a=e.whiteboardToolsInfo.fontFamily,n=e.whiteboardToolsInfo.fontStyle,o=e.whiteboardToolsInfo.fontWeight,i=e.lc.tool;"Text"==i.name&&(i.font=n+" "+o+" "+t+"px "+a)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateEraserWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updatePencilWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateShapeWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateColor",value:function(e,t){var a=this;if(t&&"object"===(void 0===t?"undefined":(0,u.default)(t))){var n=function(e){var a=!0,n=!1,o=void 0;try{for(var r,l=(0,p.default)((0,i.default)(t));!(a=(r=l.next()).done);a=!0){var s=r.value;if(e.lc.setColor(s,e.whiteboardToolsInfo[s+"Color"]),"primary"===s&&"tool_highlighter"===e.activeTool){var d=e.whiteboardToolsInfo[s+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(s,d)}}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}};a._automaticTraverseWhiteboardInstance(e,n)}}},{key:"_actionIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(0===e.lc.shapes.length){var a=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var n=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];t._batchUpdateToolDesc(e,n),t._noticeUpdateToolDesc(e)}e.lc.canRedo()?(t._updateToolDesc(e,"action_redo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_redo",{disabled:!0}),t._noticeUpdateToolDesc(e)),e.lc.canUndo()?(t._updateToolDesc(e,"action_undo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_undo",{disabled:!0}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_zoomIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(e.whiteboardMagnification<=t.minMagnification){var a=[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var n=[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]];t._batchUpdateToolDesc(e,n),t._noticeUpdateToolDesc(e)}e.whiteboardMagnification>=t.maxMagnification?(t._updateToolDesc(e,"zoom_big",{disabled:!0}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){var a=this;if(e)t&&"function"==typeof t&&t(e);else{var n=!0,o=!1,i=void 0;try{for(var r,l=(0,p.default)((0,f.default)(a.whiteboardInstanceStore));!(n=(r=l.next()).done);n=!0){var s=r.value;t&&"function"==typeof t&&t(s)}}catch(e){o=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,a=0;a<this.awaitSaveToWhiteboardInstanceSignallingArray.length;a++){var n=this.awaitSaveToWhiteboardInstanceSignallingArray[a];if(n.data&&"string"==typeof n.data&&(n.data=JSON.parse(n.data)),n.data.whiteboardID===e.id){var o=n.id.substring(n.id.lastIndexOf("###_")+4);null==e.waitingProcessShapeData[o]||void 0==e.waitingProcessShapeData[o]?(e.waitingProcessShapeData[o]=[],e.waitingProcessShapeData[o].push(n)):e.waitingProcessShapeData[o].push(n),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(a,1,null)}}if(t)for(var i=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;i>=0;i--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[i]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(i,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";if(e&&e.lc&&e.lc.canvas){var a=e.lc.canvas,n=new Image;return n.src=a.toDataURL("image/"+t),n}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas)return e.lc.canvas.toDataURL("image/"+t)}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e.data.isBaseboard&&e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var a=void 0,n=void 0,o=void 0;if("pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType)if("LinePath"==t.data.data.className){var i=t.data.data.points.length;i>0&&(a=t.data.data.points[i-1].x,n=t.data.data.points[i-1].y,o=t.remindContent),this._productionWhiteboardRemindContent(e,a,n,o,t.data.shapeId)}else"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(t.data.data.width>0&&t.data.data.height>0?(a=t.data.data.x+t.data.data.width,n=t.data.data.y):t.data.data.width>0&&t.data.data.height<0?(a=t.data.data.x+t.data.data.width,n=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(a=t.data.data.x,n=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height>0&&(a=t.data.data.x,n=t.data.data.y),o=t.remindContent,this._productionWhiteboardRemindContent(e,a,n,o,t.data.shapeId)):"Text"==t.data.data.className?(a=t.data.data.x+t.data.data.renderer.metrics.width,n=t.data.data.y+20*t.data.data.renderer.metricses.length,o=t.remindContent,this._productionWhiteboardRemindContent(e,a,n,o,t.data.shapeId)):"Line"==t.data.data.className&&(a=t.data.data.x2,n=t.data.data.y2,o=t.remindContent,this._productionWhiteboardRemindContent(e,a,n,o,t.data.shapeId))}}]),e}(),T=new w;t.default=T},uRtX:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},uy8w:function(e,t,a){var n=a("MITN");n(n.S,"Object",{create:a("OTtE")})},vuzV:function(e,t,a){a("6/+b")("observable")},w5fS:function(e,t){},wCtA:function(e,t,a){"use strict";var n=a("RNB/")(!0);a("4ztK")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})})},xSur:function(e,t,a){"use strict";t.__esModule=!0;var n=a("liLe"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()},xVzf:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},xXu8:function(e,t,a){var n=a("uRtX");e.exports=function(e,t){if(!n(e))return e;var a,o;if(t&&"function"==typeof(a=e.toString)&&!n(o=a.call(e)))return o;if("function"==typeof(a=e.valueOf)&&!n(o=a.call(e)))return o;if(!t&&"function"==typeof(a=e.toString)&&!n(o=a.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},yE5a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=void 0,t=void 0,a=void 0,n=void 0,o=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return n},this.setLocalStream=function(e){n=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return o},this.setUserThirdid=function(e){o=e},this.clearAll=function(){e=null,t=null,a=null,n=null,o=null}};t.default=new n},yZ13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous one",next:"Next person",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Again Send",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"}},colorAndMeasure:{title:"Colors and Thickness",selectColorText:"select Colour",selectMeasure:"select Thickness"}}},alertWin:{ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}}}};t.default=n},yjjd:function(e,t,a){a("bJSL"),e.exports=a("UusJ").Object.getPrototypeOf}},[0]);